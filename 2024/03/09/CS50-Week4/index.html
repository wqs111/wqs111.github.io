<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>CS50-Week4 | RadiantFlame</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - $1 行","copy":"复制"}}</script><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad: false});</script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js"></script><script>MathJax.Hub.Config({
 menuSettings: {
   zoom: "None"
 },
 showMathMenu: false,
 jax: ["input/TeX","output/CommonHTML"],
 extensions: ["tex2jax.js"],
 TeX: {
   extensions: ["AMSmath.js","AMSsymbols.js"],
   equationNumbers: {
     autoNumber: "AMS"
   }
 },
 tex2jax: {
   inlineMath: [["\\(", "\\)"]],
   displayMath: [["\\[", "\\]"]]
 }
});</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: Bender;
 src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
 font-family: BenderLight;
 src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
  --theme-encrypt-confirm: '确认'
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>CS50-Week4</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2024-03-09T13:41:15.000Z" id="date"> 2024-03-09</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2024-03-09T13:44:39.853Z" id="updated"> 2024-03-09</time></div></span><br><span>文章总字数: <div class="control">5.3k</div></span><br><span>预计阅读时间: <div class="control">25 分钟</div></span></div></div><hr><div id="post-content"><p>中断了 3 个月的更新，忙完了 CS50 的 C 语言部分，简单看了看后面的内容，然后投入到 CS106x 的学习中。</p>
<span id="more"></span>

<h1 id="PSet"><a href="#PSet" class="headerlink" title="PSet"></a>PSet</h1><h2 id="Volome"><a href="#Volome" class="headerlink" title="Volome"></a>Volome</h2><p>目标：修改音频文件的音量<br />看着作业文档稀里糊涂的就复制粘贴完了，关于文件读写操作还是很懵，<del>应该不是目前的重点，先聚焦于内存吧</del><br />仔细看一眼<br />关于文件读写<br />首先，定义一个文件变量，大概是指针的形式<code>FILE *input = fopen(&quot;[filename]&quot;,&quot;[mode]&quot;)</code>.<br />常用的文件读取模式有‘r’只读 ‘w’写入 ‘a’ 追加<br />进行文件读取操作后应紧接验证文件是否正常打开，失败应抛出错误”NULL”<br />文件调用结束后应及时使用<code>fclose()</code>关闭</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    FILE *fileOpen = fopen(<span class="hljs-string">&quot;filename.txt&quot;</span>,<span class="hljs-string">&quot;r&quot;</span>);<br><br>    <span class="hljs-keyword">if</span> (fileOpen == <span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;file open fail&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    fclose(fileOpen);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>其他的文件操作有<code>fgetc()``fread()``fwrite()</code><br />这里仅介绍<code>fread()</code><br />fread 接受 4 个参数:存储数据的内存指针，数据项大小，数据项数量，被读取文件。<br />以本题为例，给出待读取文件指针为 input；设置暂存区变量 buffer；定义一种新变量类型 int16_t,仅读取 1 项。<br />读取语句为 <code>fread(&amp;buffer,sizeof(int16_t),1,input);</code>返回值为 1，当读取至末尾时返回 0</p>
<h2 id="Filter-more"><a href="#Filter-more" class="headerlink" title="Filter more"></a>Filter more</h2><h3 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h3><p>简单看一下想干嘛</p>
<h4 id="Bitmaps"><a href="#Bitmaps" class="headerlink" title="Bitmaps"></a>Bitmaps</h4><p>位图可以通过增加深度承载不同的颜色，有 8 位，24 位等，在 RGB 颜色模式中，通过 Red，Green，Blue 的数值进行颜色表示<br />在 BMP 图像格式中，首先出现的是头文件<code>BITMAPFILEHEADER</code>，长度为 14 Bytes,接着是<code>BITMAPINFOHEADER</code>,位图信息头文件，长度为 40 Bytes。接着是特定图像的信息。<br />通过二维数组可以记录位图信息</p>
<h4 id="Image-Filtering"><a href="#Image-Filtering" class="headerlink" title="Image Filtering"></a>Image Filtering</h4><p>过滤器，可以理解为滤镜，通过滤镜可以让原始图像显示需要的信息</p>
<h4 id="Grayscale"><a href="#Grayscale" class="headerlink" title="Grayscale"></a>Grayscale</h4><p>“灰度”是使用广泛的过滤器，可以使图像转为黑白，彩色信息会转换为灰色的亮度信息<br />方法：~~ 该干嘛啊？~~</p>
<blockquote>
<p>如果红色、绿色和蓝色值都设置为 0x00（0 为十六进制），则像素为黑色。如果所有值都设置为 0xff（255 为十六进制），则像素为白色。只要红色、绿色和蓝色值都相等，结果将是沿黑白光谱的不同灰色深浅，较高的值表示较浅的阴影（更接近白色），较低的值表示较深的阴影（更接近黑色）。</p>
</blockquote>
<p>确保新图像的每个像素仍然具有与旧图像相同的一般亮度或暗度，我们可以取红色、绿色和蓝色值的平均值来确定新像素的灰色阴影</p>
<h4 id="Reflection"><a href="#Reflection" class="headerlink" title="Reflection"></a>Reflection</h4><p>“反射”，将图像对称或旋转等其他像素的位置操作</p>
<h4 id="Blur"><a href="#Blur" class="headerlink" title="Blur"></a>Blur</h4><p>模糊，将中心像素颜色设置为周围 3x3 范围内颜色的平均值<br />让像素的颜色信息与周围像素更接近</p>
<h4 id="Edges"><a href="#Edges" class="headerlink" title="Edges"></a>Edges</h4><p>Vocabularykernel 核心，内核 vernal 春天的，和煦的 eternal 永恒的，不朽的<br />corresponding 相似的，无冲突的<br />cap<br />锐化，在 AI 图像处理领域，常用 Sobel operator 进行操作<br />与模糊相反的操作，但要复杂的多<br /><del>to be continue…</del><br / class='item-img' data-src='https://cdn.nlark.com/yuque/0/2023/png/40756445/1703519033126-2cf58185-3ff9-43b1-a3bc-2ee244c7c939.png#averageHue=%232c3238&clientId=ua40aae91-42b9-4&from=paste&height=798&id=BAlMf&originHeight=1117&originWidth=1740&originalType=binary&ratio=1.399999976158142&rotation=0&showTitle=false&size=412999&status=done&style=none&taskId=u393665ca-09a2-42de-a7ad-fbc6689afb4&title=&width=1242.8571640228743'><img src="https://cdn.nlark.com/yuque/0/2023/png/40756445/1703519033126-2cf58185-3ff9-43b1-a3bc-2ee244c7c939.png#averageHue=%232c3238&clientId=ua40aae91-42b9-4&from=paste&height=798&id=BAlMf&originHeight=1117&originWidth=1740&originalType=binary&ratio=1.399999976158142&rotation=0&showTitle=false&size=412999&status=done&style=none&taskId=u393665ca-09a2-42de-a7ad-fbc6689afb4&title=&width=1242.8571640228743" alt="image.png"><br />锐化算法会使用 Sobel 的两个卷积核 Gx，Gy。卷积核中的数值是预先定义的，经过精心设计与实验验证。<br />对于中心像素，垂直检测边缘使用 Gx 卷积核，将每个卷积核值与对应的像素值相乘，然后将所有的结果的平方和的根。 ${Gx^2 + Gy^2}$的根就是新的像素值。</p>
<h3 id="Understanding"><a href="#Understanding" class="headerlink" title="Understanding"></a>Understanding</h3><p>Vocabularyaliases 别名。primitive 原始的；简陋的。encapsulate 总结；囊括；装入胶囊。triple 三倍的；三方的<br />retrieve 恢复；检索。prototype 原型，蓝本 prototypical 典型的，模范的。confined 限制，约束。<br />whereas 但是，而</p>
<p>本项目的作业文件中包含多个文件，先看 bmp.h<br />定义了一堆东西，方便我们将数据从内存中取出</p>
<p>filter.c<br />代码已经完成，但是有个要点需要注意<br />line 10 定义可被程序读取的字符串为”begr”，分别对应 blur edge grayscale reflection<br />接着程序会打开给定的图像文件并读取全部的像素信息存储到<code>image</code>变量中<br />跳到 line 101，switch 语句会判断用户需要的过滤器并调用，我们需要完成具体的过滤器函数<br />其余语句用于输出处理后图像</p>
<p>helper.h<br />一个很短的程序，仅提供了 filter.c 中出现的过滤器函数声明<br />helper.c<br />具体的函数功能消失啦~</p>
<blockquote>
<p>This part is up to you.</p>
</blockquote>
<p>Makefile<br />最后，看看这个没有后缀的文件是啥<br />wow~ ⊙o⊙ 竟然是咱们在命令行的老熟人 make 命令<br />里面只有两行命令，用来调用 clang 进行编译 c 程序<br />使用命令<code>make filter</code>来告知 make 命令要编译谁，并通过<code>./filter -g image/yard.bmp out.bmp</code>来对 image 文件夹内的 yard.bmp 图像执行灰度操作，输出图像为 out.bmp</p>
<h3 id="Walkthrough"><a href="#Walkthrough" class="headerlink" title="Walkthrough"></a>Walkthrough</h3><h4 id="灰度"><a href="#灰度" class="headerlink" title="灰度"></a>灰度</h4><p>两层循环，对 RGB 颜色求平均值即可，esay</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// Convert image to grayscale</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">grayscale</span><span class="hljs-params">(<span class="hljs-type">int</span> height, <span class="hljs-type">int</span> width, RGBTRIPLE image[height][width])</span><br>&#123;<br>    <span class="hljs-type">int</span> average = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width;j++)<br>        &#123;<br>            average = (image[i][j].rgbtBlue + image[i][j].rgbtGreen + image[i][j].rgbtRed) / <span class="hljs-number">3</span>;<br>            image[i][j].rgbtBlue = average;<br>            image[i][j].rgbtRed = average;<br>            image[i][j].rgbtGreen = average;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>注：本题需四舍五入，RGBTRPLE 为整数型，所以计算平均值时须进行浮点计算,并引入数学计算库<code>math.h</code><br /><code>average = round((float)(image[i][j].rgbtBlue + image[i][j].rgbtGreen + image[i][j].rgbtRed) / 3);</code></p>
<h4 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// Reflect image horizontally</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">reflect</span><span class="hljs-params">(<span class="hljs-type">int</span> height, <span class="hljs-type">int</span> width, RGBTRIPLE image[height][width])</span><br>&#123;<br>    RGBTRIPLE temp;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width / <span class="hljs-number">2</span>;j++)<br>        &#123;<br>            image[i][j].rgbtBlue = temp.rgbtBlue;<br>            image[i][j].rgbtRed = temp.rgbtRed;<br>            image[i][j].rgbtGreen = temp.rgbtGreen;<br><br>            image[i][j].rgbtBlue = image[i][width - j].rgbtBlue;<br>            image[i][j].rgbtRed = image[i][width - j].rgbtRed;<br>            image[i][j].rgbtGreen = image[i][width - j].rgbtGreen;<br><br>            image[i][width - j].rgbtBlue = temp.rgbtBlue;<br>            image[i][width - j].rgbtRed = temp.rgbtRed;<br>            image[i][width - j].rgbtGreen = temp.rgbtGreen;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>将每列的第一个值的 RGB 信息与末位对调,定义一个 RGB 同款变量暂存一下信息 eas…wait!怎么反转了右半边的图像，左半边的黑掉了！？<br />问问鸭子</p>
<blockquote>
<p>ddb<br>It seems like you’re trying to reflect an image horizontally. However, it looks like you’re not correctly swapping the pixels. You’re assigning the values of image[i][j] to temp after you’ve already changed image[i][j]. This means temp isn’t storing the original values.<br>Try this: before you change image[i][j], first store its original values in temp. Then, you can safely modify image[i][j] and use temp to change image[i][width - j].<br>Remember, when you’re reflecting the image, you’re swapping pixels from opposite ends of the row. So, image[i][width - j - 1] might be the correct index for the pixel on the other end, not image[i][width - j].</p>
</blockquote>
<p>谢谢 dd 鸭，temp 没能正确存储信息，图像的索引也漏掉了<code>-1</code>操作.<br />temp 是未初始化的空值，将 temp 赋给 image[i][j]明显是错误的<br /><del>调整一下 temp</del><br />Reflection 根本没有对 RGB 值进行操作，直接将图像左右对调就好了<br />简化后代码是这样</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// Reflect image horizontally</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">reflect</span><span class="hljs-params">(<span class="hljs-type">int</span> height, <span class="hljs-type">int</span> width, RGBTRIPLE image[height][width])</span><br>&#123;<br>    RGBTRIPLE temp;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width / <span class="hljs-number">2</span>;j++)<br>        &#123;<br>            temp = image[i][j];<br>            image[i][j] = image[i][width - j - <span class="hljs-number">1</span>];<br>            image[i][width - j - <span class="hljs-number">1</span>] = temp;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="模糊"><a href="#模糊" class="headerlink" title="模糊"></a>模糊</h4><p>将中心像素颜色设置为周围 3x3 范围内颜色的平均值<br />定义一个与像素同类型的变量表示平均值<br />嵌套循环不解释，先解决周围一圈都有邻居的<br />用 if 把它们全挑出来，按 i-1,i,i+1 顺序来计算，同时也可以作为模板运用到边角求平均，同时考虑边缘,利用 if 进行判断</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width;j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == height - <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j == width <span class="hljs-number">-1</span>)<br>            <span class="hljs-keyword">else</span><br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>3x3 网格计算式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">else</span><br>&#123;<br>    average.rgbtRed = (image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtRed + image[i - <span class="hljs-number">1</span>][j].rgbtRed + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtRed + image[i][j - <span class="hljs-number">1</span>].rgbtRed + image[i][j].rgbtRed + image[i][j + <span class="hljs-number">1</span>].rgbtRed + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtRed + image[i + <span class="hljs-number">1</span>][j].rgbtRed + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtRed) / <span class="hljs-number">9</span>;<br>    average.rgbtGreen = (image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtGreen + image[i - <span class="hljs-number">1</span>][j].rgbtGreen + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtGreen + image[i][j - <span class="hljs-number">1</span>].rgbtGreen + image[i][j].rgbtGreen + image[i][j + <span class="hljs-number">1</span>].rgbtGreen + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtGreen + image[i + <span class="hljs-number">1</span>][j].rgbtGreen + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtGreen) / <span class="hljs-number">9</span>;<br>    average.rgbtBlue = (image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtBlue + image[i - <span class="hljs-number">1</span>][j].rgbtBlue + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtBlue + image[i][j - <span class="hljs-number">1</span>].rgbtBlue + image[i][j].rgbtBlue + image[i][j + <span class="hljs-number">1</span>].rgbtBlue + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtBlue + image[i + <span class="hljs-number">1</span>][j].rgbtBlue + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtBlue) / <span class="hljs-number">9</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><del>计算完把均值赋给像素点，函数返回值，结束</del><br />debug<br />取平均操作会去到周围的值，此处应用原始图像 RGB 值计算，而上述代码在每个循环内都改变了当前像素的值，导致下方的计算全部出错。<br />计算均值过程不能改变原值，计算完成后统一赋值。<br />设置临时变量<code>temp[i][j]</code>存储位置象素平均数，循环结束后再进行一次赋值循环。<br />完成<br />code backup（i j 错了好多，写的时候）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// Blur image</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">blur</span><span class="hljs-params">(<span class="hljs-type">int</span> height, <span class="hljs-type">int</span> width, RGBTRIPLE image[height][width])</span><br>&#123;<br>    RGBTRIPLE average;<br>    RGBTRIPLE temp[height][width];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width;j++)<br>        &#123;<br>            <span class="hljs-comment">//corner</span><br>            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j == <span class="hljs-number">0</span>)<br>            &#123;<br>                average.rgbtRed = round((<span class="hljs-type">float</span>)(image[i][j].rgbtRed + image[i + <span class="hljs-number">1</span>][j].rgbtRed + image[i][j + <span class="hljs-number">1</span>].rgbtRed + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtRed) / <span class="hljs-number">4</span>);<br>                average.rgbtGreen = round((<span class="hljs-type">float</span>)(image[i][j].rgbtGreen + image [i + <span class="hljs-number">1</span>][j].rgbtGreen + image[i][j + <span class="hljs-number">1</span>].rgbtGreen + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtGreen) / <span class="hljs-number">4</span>);<br>                average.rgbtBlue = round((<span class="hljs-type">float</span>)(image[i][j].rgbtBlue + image[i + <span class="hljs-number">1</span>][j].rgbtBlue + image[i][j + <span class="hljs-number">1</span>].rgbtBlue + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtBlue) / <span class="hljs-number">4</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == height - <span class="hljs-number">1</span> &amp;&amp; j == <span class="hljs-number">0</span>)<br>            &#123;<br>                average.rgbtRed = round((<span class="hljs-type">float</span>)(image[i][j].rgbtRed + image[i - <span class="hljs-number">1</span>][j].rgbtRed + image[i][j + <span class="hljs-number">1</span>].rgbtRed + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtRed) / <span class="hljs-number">4</span>);<br>                average.rgbtGreen = round((<span class="hljs-type">float</span>)(image[i][j].rgbtGreen + image [i - <span class="hljs-number">1</span>][j].rgbtGreen + image[i][j + <span class="hljs-number">1</span>].rgbtGreen + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtGreen) / <span class="hljs-number">4</span>);<br>                average.rgbtBlue = round((<span class="hljs-type">float</span>)(image[i][j].rgbtBlue + image[i - <span class="hljs-number">1</span>][j].rgbtBlue + image[i][j + <span class="hljs-number">1</span>].rgbtBlue + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtBlue) / <span class="hljs-number">4</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j == width - <span class="hljs-number">1</span>)<br>            &#123;<br>                average.rgbtRed = round((<span class="hljs-type">float</span>)(image[i][j].rgbtRed + image[i + <span class="hljs-number">1</span>][j].rgbtRed + image[i][j - <span class="hljs-number">1</span>].rgbtRed + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtRed) / <span class="hljs-number">4</span>);<br>                average.rgbtGreen = round((<span class="hljs-type">float</span>)(image[i][j].rgbtGreen + image [i + <span class="hljs-number">1</span>][j].rgbtGreen + image[i][j - <span class="hljs-number">1</span>].rgbtGreen + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtGreen) / <span class="hljs-number">4</span>);<br>                average.rgbtBlue = round((<span class="hljs-type">float</span>)(image[i][j].rgbtBlue + image[i + <span class="hljs-number">1</span>][j].rgbtBlue + image[i][j - <span class="hljs-number">1</span>].rgbtBlue + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtBlue) / <span class="hljs-number">4</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == height - <span class="hljs-number">1</span>  &amp;&amp; j == width - <span class="hljs-number">1</span>)<br>            &#123;<br>                average.rgbtRed = round((<span class="hljs-type">float</span>)(image[i][j].rgbtRed + image[i - <span class="hljs-number">1</span>][j].rgbtRed + image[i][j - <span class="hljs-number">1</span>].rgbtRed + image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtRed) / <span class="hljs-number">4</span>);<br>                average.rgbtGreen = round((<span class="hljs-type">float</span>)(image[i][j].rgbtGreen + image [i - <span class="hljs-number">1</span>][j].rgbtGreen + image[i][j - <span class="hljs-number">1</span>].rgbtGreen + image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtGreen) / <span class="hljs-number">4</span>);<br>                average.rgbtBlue = round((<span class="hljs-type">float</span>)(image[i][j].rgbtBlue + image[i - <span class="hljs-number">1</span>][j].rgbtBlue + image[i][j - <span class="hljs-number">1</span>].rgbtBlue + image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtBlue) / <span class="hljs-number">4</span>);<br>            &#125;<br>            <span class="hljs-comment">//edge</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j != <span class="hljs-number">0</span> &amp;&amp; j != width - <span class="hljs-number">1</span>)<br>            &#123;<br>                average.rgbtRed = round((<span class="hljs-type">float</span>)(image[i][j - <span class="hljs-number">1</span>].rgbtRed + image[i][j].rgbtRed + image[i][j + <span class="hljs-number">1</span>].rgbtRed + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtRed + image[i + <span class="hljs-number">1</span>][j].rgbtRed + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtRed) / <span class="hljs-number">6</span>);<br>                average.rgbtGreen = round((<span class="hljs-type">float</span>)(image[i][j - <span class="hljs-number">1</span>].rgbtGreen + image[i][j].rgbtGreen + image[i][j + <span class="hljs-number">1</span>].rgbtGreen + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtGreen + image[i + <span class="hljs-number">1</span>][j].rgbtGreen + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtGreen) / <span class="hljs-number">6</span>);<br>                average.rgbtBlue = round((<span class="hljs-type">float</span>)(image[i][j - <span class="hljs-number">1</span>].rgbtBlue + image[i][j].rgbtBlue + image[i][j + <span class="hljs-number">1</span>].rgbtBlue + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtBlue + image[i + <span class="hljs-number">1</span>][j].rgbtBlue + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtBlue) / <span class="hljs-number">6</span>);<br>            &#125;<br>            <span class="hljs-comment">//other 3 blocks like this...</span><br><br>            <span class="hljs-comment">//center</span><br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                average.rgbtRed = round((<span class="hljs-type">float</span>)(image[i - <span class="hljs-number">1</span>][j].rgbtRed + image[i][j].rgbtRed + image[i + <span class="hljs-number">1</span>][j].rgbtRed + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtRed + image[i][j - <span class="hljs-number">1</span>].rgbtRed + image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtRed + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtRed + image[i][j + <span class="hljs-number">1</span>].rgbtRed + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtRed) / <span class="hljs-number">9</span>);<br>                average.rgbtGreen = round((<span class="hljs-type">float</span>)(image[i - <span class="hljs-number">1</span>][j].rgbtGreen + image[i][j].rgbtGreen + image[i + <span class="hljs-number">1</span>][j].rgbtGreen + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtGreen + image[i][j - <span class="hljs-number">1</span>].rgbtGreen + image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtGreen + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtGreen + image[i][j + <span class="hljs-number">1</span>].rgbtGreen + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtGreen) / <span class="hljs-number">9</span>);<br>                average.rgbtBlue = round((<span class="hljs-type">float</span>)(image[i - <span class="hljs-number">1</span>][j].rgbtBlue + image[i][j].rgbtBlue + image[i + <span class="hljs-number">1</span>][j].rgbtBlue + image[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtBlue + image[i][j - <span class="hljs-number">1</span>].rgbtBlue + image[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>].rgbtBlue + image[i - <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtBlue + image[i][j + <span class="hljs-number">1</span>].rgbtBlue + image[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>].rgbtBlue) / <span class="hljs-number">9</span>);<br>            &#125;<br>            temp[i][j] = average;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width;j++)<br>        &#123;<br>            image[i][j] = temp[i][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="边缘检测"><a href="#边缘检测" class="headerlink" title="边缘检测"></a>边缘检测</h4><p>先设置两个卷积核，如何遍历每个像素，进行计算<br />对于边缘像素：</p>
<blockquote>
<p>我们将要求您将图像视为图像边缘周围有一个 1 像素的黑色实心边框：因此，尝试访问图像边缘以上的像素应被视为纯黑色像素（每个红色的值为 0， 绿色和蓝色）。这将有效地忽略我们计算中的这些像素 Gx 以及 Gy.</p>
</blockquote>
<p>就是在外面再套上一层黑框呗，怎么搞？</p>
<ul>
<li>黑框的值都为 0，即使参与计算也不会对结果造成影响，干脆不对黑框计算了，试了，循环逻辑被搞的很复杂</li>
<li>新建一个临时图片，即原图片加上一层黑框：两层循环将数值计入 temp 变量，原图信息从[1][1]位置开始写入</li>
</ul>
<p>没忍住问了一下 GPT，然后发现给出了极为简洁的代码，我在 Blur 那里写的实在是太烂了。<br />使用嵌套循环，在对每个像素操作时在套两层循环，用来读取 Gx 和 Gy 数组循环计数从-1 开始，到 1 结束。太妙了！</p>
<p>关于数值限制<br /><code>temp[i][j].rgbtRed = (temp[i][j].rgbtRed &gt; 255) ? 255 : temp[i][j].rgbtRed;</code>这行代码是什么意思<br />这行代码使用了条件运算符（也称为三元运算符），其语法如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">condition ? expression_if_true : expression_if_false;<br></code></pre></td></tr></table></figure>

<p>在你提到的代码中，这行代码的作用是检查 <code>temp[i][j].rgbtRed</code> 是否大于 255。如果条件成立（即 <code>temp[i][j].rgbtRed &gt; 255</code> 为真），则表达式的结果为 255；如果条件不成立，则表达式的结果为 <code>temp[i][j].rgbtRed</code> 的当前值。</p>
<p>具体说，这行代码的含义是：如果红色通道的值 <code>temp[i][j].rgbtRed</code> 大于 255，将其设为 255；否则，保持其原始值。这样做的目的是确保图像的红色通道值在合理的范围内，不超过 255。同样的逻辑也适用于绿色和蓝色通道的处理。</p>
<p>将原始图像添加一层黑框的处理中，临时存储图像的变量 temp 大小为 weight + 2 ，最终存储新图像信息的临时变量 temp1 大小与原始图像一至</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// Detect edges</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">edges</span><span class="hljs-params">(<span class="hljs-type">int</span> height, <span class="hljs-type">int</span> width, RGBTRIPLE image[height][width])</span><br>&#123;<br><br>    RGBTRIPLE temp[height][width];<br><br>    <span class="hljs-type">int</span> Gx[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>] =<br>    &#123;<br>        &#123;<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;,<br>        &#123;<span class="hljs-number">-2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>&#125;,<br>        &#123;<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;<br>    &#125;;<br>    <span class="hljs-type">int</span> Gy[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>] =<br>    &#123;<br>        &#123;<span class="hljs-number">-1</span>,<span class="hljs-number">-2</span>,<span class="hljs-number">-1</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&#125;<br>    &#125;;<br><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width;j++)<br>        &#123;<br>            <span class="hljs-type">int</span> sumXR = <span class="hljs-number">0</span>,sumYR = <span class="hljs-number">0</span>,sumXG = <span class="hljs-number">0</span>,sumYG = <span class="hljs-number">0</span>,sumXB = <span class="hljs-number">0</span>,sumYB = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ni = <span class="hljs-number">-1</span>;ni &lt;= <span class="hljs-number">1</span>;ni++)<br>            &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> nj = <span class="hljs-number">-1</span>;nj &lt;= <span class="hljs-number">1</span>;nj++)<br>                &#123;<br>                    <span class="hljs-keyword">if</span> (i + ni &gt;= <span class="hljs-number">0</span> &amp;&amp; i + ni &lt;= height &amp;&amp; j + nj &gt;= <span class="hljs-number">0</span> &amp;&amp; j + nj &lt;= width)<br>                    &#123;<br>                        sumXR += image[i + ni][j + nj].rgbtRed * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                        sumYR += image[i + ni][j + nj].rgbtRed * Gy[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br><br>                        sumXG += image[i + ni][j + nj].rgbtGreen * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                        sumYG += image[i + ni][j + nj].rgbtGreen * Gy[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br><br>                        sumXB += image[i + ni][j + nj].rgbtBlue * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                        sumYB += image[i + ni][j + nj].rgbtBlue * Gy[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                    &#125;<br><br>                &#125;<br>            &#125;<br><br>            <span class="hljs-comment">//corner</span><br>            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j == <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ni = <span class="hljs-number">0</span>;ni &lt; <span class="hljs-number">1</span>;ni++)<br>                &#123;<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> nj = <span class="hljs-number">0</span>;nj &lt; <span class="hljs-number">1</span>;nj++)<br>                    &#123;<br>                        sumXR += image[i + ni][j + nj].rgbtRed * Gx[ni][nj];<br>                        sumXG += image[i + ni][j + nj].rgbtGreen * Gx[ni][nj];<br>                        sumXB += image[i + ni][j + nj].rgbtBlue * Gx[ni][nj];<br><br>                        sumYR += image[i + ni][j + nj].rgbtRed * Gx[ni][nj];<br>                        sumYG += image[i + ni][j + nj].rgbtGreen * Gx[ni][nj];<br>                        sumYB += image[i + ni][j + nj].rgbtBlue * Gx[ni][nj];<br>                    &#125;<br>                &#125;<br><br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j == width - <span class="hljs-number">1</span>)<br>            &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ni = <span class="hljs-number">-1</span>;ni &lt; <span class="hljs-number">1</span>;ni++)<br>                &#123;<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> nj = <span class="hljs-number">0</span>;nj &lt; <span class="hljs-number">1</span>;nj++)<br>                    &#123;<br>                        sumXR += image[i + ni][j + nj].rgbtRed * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumXG += image[i + ni][j + nj].rgbtGreen * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumXB += image[i + ni][j + nj].rgbtBlue * Gx[ni + <span class="hljs-number">1</span>][nj];<br><br>                        sumYR += image[i + ni][j + nj].rgbtRed * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumYG += image[i + ni][j + nj].rgbtGreen * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumYB += image[i + ni][j + nj].rgbtBlue * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == height - <span class="hljs-number">1</span> &amp;&amp; j == <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ni = <span class="hljs-number">-1</span>;ni &lt; <span class="hljs-number">1</span>;ni++)<br>                &#123;<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> nj = <span class="hljs-number">0</span>;nj &lt; <span class="hljs-number">1</span>;nj++)<br>                    &#123;<br>                        sumXR += image[i + ni][j + nj].rgbtRed * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumXG += image[i + ni][j + nj].rgbtGreen * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumXB += image[i + ni][j + nj].rgbtBlue * Gx[ni + <span class="hljs-number">1</span>][nj];<br><br>                        sumYR += image[i + ni][j + nj].rgbtRed * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumYG += image[i + ni][j + nj].rgbtGreen * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                        sumYB += image[i + ni][j + nj].rgbtBlue * Gx[ni + <span class="hljs-number">1</span>][nj];<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == height - <span class="hljs-number">1</span> &amp;&amp; j == width - <span class="hljs-number">1</span>)<br>            &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ni = <span class="hljs-number">-1</span>;ni &lt; <span class="hljs-number">1</span>;ni++)<br>                &#123;<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> nj = <span class="hljs-number">-1</span>;nj &lt; <span class="hljs-number">1</span>;nj++)<br>                    &#123;<br>                        sumXR += image[i + ni][j + nj].rgbtRed * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                        sumXG += image[i + ni][j + nj].rgbtGreen * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                        sumXB += image[i + ni][j + nj].rgbtBlue * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br><br>                        sumYR += image[i + ni][j + nj].rgbtRed * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                        sumYG += image[i + ni][j + nj].rgbtGreen * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                        sumYB += image[i + ni][j + nj].rgbtBlue * Gx[ni + <span class="hljs-number">1</span>][nj + <span class="hljs-number">1</span>];<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-comment">//edge</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j != <span class="hljs-number">0</span> &amp;&amp; j != width - <span class="hljs-number">1</span>)<br>            &#123;<br><br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == height - <span class="hljs-number">1</span> &amp;&amp; j != <span class="hljs-number">0</span> &amp;&amp; j != width - <span class="hljs-number">1</span>)<br>            &#123;<br><br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span> &amp;&amp; i != <span class="hljs-number">0</span> &amp;&amp; i != height - <span class="hljs-number">1</span>)<br>            &#123;<br><br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j == width - <span class="hljs-number">1</span> &amp;&amp; i != <span class="hljs-number">0</span> &amp;&amp; i != height - <span class="hljs-number">1</span>)<br>            &#123;<br><br>            &#125;<br><br>            temp[i][j].rgbtRed = round(<span class="hljs-built_in">sqrt</span>((<span class="hljs-type">float</span>)sumXR * sumXR + sumYR * sumYR));<br>            temp[i][j].rgbtGreen = round(<span class="hljs-built_in">sqrt</span>((<span class="hljs-type">float</span>)sumXG * sumXG + sumYG * sumYG));<br>            temp[i][j].rgbtBlue = round(<span class="hljs-built_in">sqrt</span>((<span class="hljs-type">float</span>)sumXB * sumXB + sumYB * sumYB));<br><br>            <span class="hljs-keyword">if</span> (temp[i][j].rgbtRed &gt; <span class="hljs-number">255</span>) temp[i][j].rgbtRed = <span class="hljs-number">255</span>;<br>            <span class="hljs-keyword">if</span> (temp[i][j].rgbtGreen &gt; <span class="hljs-number">255</span>) temp[i][j].rgbtGreen = <span class="hljs-number">255</span>;<br>            <span class="hljs-keyword">if</span> (temp[i][j].rgbtBlue &gt; <span class="hljs-number">255</span>) temp[i][j].rgbtBlue = <span class="hljs-number">255</span>;<br>            <span class="hljs-keyword">if</span> (temp[i][j].rgbtRed &lt; <span class="hljs-number">0</span>) temp[i][j].rgbtRed = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">if</span> (temp[i][j].rgbtGreen &lt; <span class="hljs-number">0</span>) temp[i][j].rgbtGreen = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">if</span> (temp[i][j].rgbtBlue &lt; <span class="hljs-number">0</span>) temp[i][j].rgbtBlue = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; height;i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; width;j++)<br>        &#123;<br>            image[i][j] = temp[i][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="Recover"><a href="#Recover" class="headerlink" title="Recover"></a>Recover</h2><p><del>Reverse（颠倒）</del>（2024 版 CS50 删去该题）<br />目标：从内存中恢复 JPEG 图像</p>
<h3 id="Background-1"><a href="#Background-1" class="headerlink" title="Background"></a>Background</h3><p>如何将 JPEG 图片辨认出来？<br />JPEG 文件的前三个字节为 0xff 0xd8 0xff，第四个字节的前四位是 1110<br />对任意一张图片，相机都会将其按“块”进行存储，每个块大小为 512B，则一张 1MB 的图片会将占用 2048 个块，因为松弛空间的存在，0.99MB 大小的图片同样占据 2048 个块<br />松弛空间均被 0 填充，且无需考虑<br />本题总共应能恢复 50 张图像</p>
<h3 id="Understanding-1"><a href="#Understanding-1" class="headerlink" title="Understanding"></a>Understanding</h3><p>本题没有预先给出功能性代码<br />对于文件操作，使用&lt;stdlib.h&gt;库</p>
<h3 id="Specification"><a href="#Specification" class="headerlink" title="Specification"></a>Specification</h3><p>文件接受一行命令行输入<br />不正确的操作即时停止并返回值 1<br />恢复的图片以###.jpg 格式命名，从 000 开始<br />如果使用 malloc，不要泄露内存</p>
<h3 id="Walkthrough-1"><a href="#Walkthrough-1" class="headerlink" title="Walkthrough"></a>Walkthrough</h3><p>首先<del>打开和关闭 raw 文件，若错误返回 1</del>检测命令行传入参数数量是否唯一，否则弹出错误提示，然后尝试打开文件<br />设置缓冲区 buffer，每次读取 512 个大小，每当 JPEG 文件签名验证通过时，创建新的图像文件并写入<br />关于函数 sprintf<br />This function prints a “formatted string” to a location in memory. It expects as input the address of a buffer (which must be large enough to fit the string, including its \0), a “format string” that specifies what to print, and zero or more subsequent arguments. The format string can optionally contain “conversion specifications,” placeholders that begin with % that specify how to format the function’s subsequent arguments, if any. For instance, if buffer is an array of (at least) 13 bytes and i is 50, this function could format a string as follows:<br />此函数将“格式化字符串”打印到内存中的某个位置。它期望缓冲区的地址（必须足够大以适合字符串，包括其 \0）、指定要打印的内容的“格式字符串”以及零个或多个后续参数作为输入。格式字符串可以选择包含“转换规范”，即以 %指定如何设置函数后续参数的格式（如果有）。例如，如果 buffer 是一个包含（至少）13 个字节且 i 是 50，此函数可以按如下方式格式化字符串：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sprintf(buffer, &quot;hello, %s\n&quot;, i);<br></code></pre></td></tr></table></figure>

<p>何处使用？<br />批量创建文件时，为可创建文件的 fopen 函数提供文件名</p>
<blockquote>
<p>ddb<br>在 C 语言中，你可以使用一个循环结构来批量创建文件。在每次循环中，你可以使用 sprintf 函数来生成文件名，然后使用 fopen 函数来创建文件。例如：</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> filename[<span class="hljs-number">8</span>];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++)<br>&#123;<br>    <span class="hljs-built_in">sprintf</span>(filename, <span class="hljs-string">&quot;%03d&quot;</span>, i);<br>    FILE* file = fopen(filename, <span class="hljs-string">&quot;w&quot;</span>);<br>    <span class="hljs-comment">// Remember to check if the file was successfully opened</span><br>    <span class="hljs-keyword">if</span> (file == <span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-comment">// Handle the error</span><br>    &#125;<br>    <span class="hljs-comment">// Don&#x27;t forget to close the file when you&#x27;re done</span><br>    fclose(file);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这段代码会创建名为 001，002，003，…，100 的文件。注意，%03d 在 sprintf 中表示一个三位数，如果数值不足三位，则在前面补 0。</p>
<h3 id="Source-Code"><a href="#Source-Code" class="headerlink" title="Source Code"></a>Source Code</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">2</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Usage: ./recover Filename.\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br><br>    FILE *card = fopen(argv[<span class="hljs-number">1</span>], <span class="hljs-string">&quot;rb&quot;</span>);<br>    <span class="hljs-keyword">if</span> (card == <span class="hljs-literal">NULL</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><br>    <span class="hljs-type">uint8_t</span> buffer[<span class="hljs-number">512</span>];<br>    FILE *pic = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-type">char</span> filename[<span class="hljs-number">8</span>];<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (fread(buffer, <span class="hljs-number">1</span>, <span class="hljs-number">512</span>, card) == <span class="hljs-number">512</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (buffer[<span class="hljs-number">0</span>] == <span class="hljs-number">0xff</span> &amp;&amp; buffer[<span class="hljs-number">1</span>] == <span class="hljs-number">0xd8</span> &amp;&amp; buffer[<span class="hljs-number">2</span>] == <span class="hljs-number">0xff</span> &amp;&amp; (buffer[<span class="hljs-number">3</span>] &amp; <span class="hljs-number">0xf0</span>) == <span class="hljs-number">0xe0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (pic != <span class="hljs-literal">NULL</span>)<br>                fclose(pic);<br>            pic = <span class="hljs-literal">NULL</span>;<br><br>            <span class="hljs-built_in">sprintf</span>(filename, <span class="hljs-string">&quot;%03d.jpg&quot;</span>, i++);<br>            pic = fopen(filename, <span class="hljs-string">&quot;wb&quot;</span>);<br>            fwrite(buffer, <span class="hljs-number">1</span>, <span class="hljs-number">512</span>, pic);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pic != <span class="hljs-literal">NULL</span>)<br>        &#123;<br>            fwrite(buffer, <span class="hljs-number">1</span>, <span class="hljs-number">512</span>, pic);<br>        &#125;<br>    &#125;<br><br>    fclose(card);<br>    <span class="hljs-keyword">if</span> (pic != <span class="hljs-literal">NULL</span>)<br>        fclose(pic);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="vocabulary"><a href="#vocabulary" class="headerlink" title="vocabulary"></a>vocabulary</h3><table>
<thead>
<tr>
<th>demarcation</th>
<th>initialize</th>
<th>implications</th>
<th>iteration</th>
<th>trailing</th>
</tr>
</thead>
<tbody><tr>
<td>划定的界限</td>
<td>初始化</td>
<td>暗示；蕴含</td>
<td>反复</td>
<td>牵引的；拖尾的</td>
</tr>
</tbody></table>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2024/03/09/CS50-Week5/">← 下一篇 CS50-Week5</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/12/21/Git%E4%B8%8EGithub/">Git与Github 上一篇 →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="文章目录">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Qs Wang</a></h1><div id="description"><p>Me,a fresher in NAU,run the blog.</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/wqs111"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" href="mailto:wqs820626@gmail.com"><i class="fa fa-envelope" alt="E-Mail"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/107678025"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PSet"><span class="toc-number">1.</span> <span class="toc-text">PSet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Volome"><span class="toc-number">1.1.</span> <span class="toc-text">Volome</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Filter-more"><span class="toc-number">1.2.</span> <span class="toc-text">Filter more</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Background"><span class="toc-number">1.2.1.</span> <span class="toc-text">Background</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Bitmaps"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">Bitmaps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Image-Filtering"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">Image Filtering</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Grayscale"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">Grayscale</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Reflection"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">Reflection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Blur"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">Blur</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Edges"><span class="toc-number">1.2.1.6.</span> <span class="toc-text">Edges</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Understanding"><span class="toc-number">1.2.2.</span> <span class="toc-text">Understanding</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Walkthrough"><span class="toc-number">1.2.3.</span> <span class="toc-text">Walkthrough</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%81%B0%E5%BA%A6"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">灰度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">反射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">模糊</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">边缘检测</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Recover"><span class="toc-number">1.3.</span> <span class="toc-text">Recover</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Background-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">Background</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Understanding-1"><span class="toc-number">1.3.2.</span> <span class="toc-text">Understanding</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Specification"><span class="toc-number">1.3.3.</span> <span class="toc-text">Specification</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Walkthrough-1"><span class="toc-number">1.3.4.</span> <span class="toc-text">Walkthrough</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Source-Code"><span class="toc-number">1.3.5.</span> <span class="toc-text">Source Code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vocabulary"><span class="toc-number">1.3.6.</span> <span class="toc-text">vocabulary</span></a></li></ol></li></ol></li></ol></div></div><footer><nobr><span class="icp-title">copyright</span><a class="icp-content" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a></nobr><br><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> 主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/lib/encrypt/hbe.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>