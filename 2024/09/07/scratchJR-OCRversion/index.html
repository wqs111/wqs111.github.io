<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>scratchJR_OCRversion二次开发说明 | RadiantFlame</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy"}}</script><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad: false});</script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js"></script><script>MathJax.Hub.Config({
 menuSettings: {
   zoom: "None"
 },
 showMathMenu: false,
 jax: ["input/TeX","output/CommonHTML"],
 extensions: ["tex2jax.js"],
 TeX: {
   extensions: ["AMSmath.js","AMSsymbols.js"],
   equationNumbers: {
     autoNumber: "AMS"
   }
 },
 tex2jax: {
   inlineMath: [["\\(", "\\)"]],
   displayMath: [["\\[", "\\]"]]
 }
});</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: Bender;
 src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
 font-family: BenderLight;
 src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
  --theme-encrypt-confirm: 'confirm'
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>scratchJR_OCRversion二次开发说明</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2024-09-07T14:51:25.000Z" id="date"> 2024-09-07</time></div></span><br><span>Last Update: <div class="control"><time datetime="2024-09-07T14:57:42.438Z" id="updated"> 2024-09-07</time></div></span><br><span>Word Count: <div class="control">3.6k</div></span><br><span>Read Time: <div class="control">18 min</div></span></div></div><hr><div id="post-content"><p>一次在AI辅助下开展的软件二次开发实践，主要涉及有Electron，SQLite技术栈。</p>
<span id="more"></span>

<h1 id="针对特定需求进行scratchJR软件的二次开发说明"><a href="#针对特定需求进行scratchJR软件的二次开发说明" class="headerlink" title="针对特定需求进行scratchJR软件的二次开发说明"></a>针对特定需求进行scratchJR软件的二次开发说明</h1 class='item-img' data-src='D:\download\1724753512299.png'><img src="D:\download\1724753512299.png" alt="1724753512299" style="zoom:40%;" />

<h2 id="开发目的"><a href="#开发目的" class="headerlink" title="开发目的"></a>开发目的</h2><p>实体化的积木可以让学生直观地看到代码的结构和逻辑，帮助他们理解编程的基本概念。通过动手操作积木，学生可以更积极地参与学习过程，增强学习的互动性和趣味性。编程对初学者来说可能比较抽象和复杂，实体化的积木可以降低学习难度，让编程变得更加容易接近。通过组合不同的积木块来构建程序，学生可以学习到基本的逻辑和顺序结构，培养逻辑思维能力。</p>
<p>因此为scratchJR教学软件添加拍照识别特定实体代码块，并转换为对应可执行文件的功能。</p>
<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><ul>
<li><p>scratchJR二次开发版（以下简称为“sjr”）应在软件原有基础上增加拍照，识别实体代码块，转换为sjr可识别的文件并打开的功能。</p>
</li>
<li><p>sjr应能够在Windows平台（win32_x64），西沃教学白板等平台正常运行。</p>
</li>
</ul>
<h2 id="设计概要"><a href="#设计概要" class="headerlink" title="设计概要"></a>设计概要</h2><p class='item-img' data-src='https://github.com/krayon/scratchjr-desktop/raw/master/docs/scratchjr_electron_overview.png'><img src="https://github.com/krayon/scratchjr-desktop/raw/master/docs/scratchjr_electron_overview.png" alt="Scratch Jr. Architecture Diagram"></p>
<p>因sjr技术框架为Electron，将拍摄+图像识别，处理+导入图片数据分别设置为两个功能按钮，并辅以图像与标号示意。</p>
<p>功能实现细节见“详细设计”。</p>
<h3 id="拍摄-图像识别"><a href="#拍摄-图像识别" class="headerlink" title="拍摄+图像识别"></a>拍摄+图像识别</h3><p>对各类代码块进行编号并标识，使用Python+OpenCV进行摄像头行为控制，将拍下的图片进行OCR文字识别，将识别结果通过ipc通信导入下一步等待用户选择是否导入或重新拍摄。</p class='item-img' data-src='C:\Users\18720\AppData\Roaming\Typora\typora-user-images\image-20240827181615691.png'><img src="C:\Users\18720\AppData\Roaming\Typora\typora-user-images\image-20240827181615691.png" alt="image-20240827181615691" style="zoom:53%;" />

<p>UMI离线OCR文字识别方案：调用本地文字识别引擎实现无网络情况下sjr能够正常工作，OCR引擎以打包致sjr文件包中并实现点击即用。用户仅需启动OCR服务后即可正常使用sjr识别功能。</p>
<p>开源项目地址：<a target="_blank" rel="noopener" href="https://github.com/hiroi-sora/Umi-OCR">hiroi-sora&#x2F;Umi-OCR: OCR software, free and offline. 开源、免费的离线OCR软件。内置多国语言库。 (github.com)</a></p>
<h3 id="处理-导入数据"><a href="#处理-导入数据" class="headerlink" title="处理+导入数据"></a>处理+导入数据</h3><p>当用户按下导入数据按钮时，将识别结果导入sjr数据库并自动刷新界面，主界面出现按当前时间命名的新工程，导入成功。</p>
<h2 id="详细设计"><a href="#详细设计" class="headerlink" title="详细设计"></a>详细设计</h2><p>参照scratchJR官方二次开发说明进行开发构建。</p>
<h3 id="前端页面设计"><a href="#前端页面设计" class="headerlink" title="前端页面设计"></a>前端页面设计</h3><p class='item-img' data-src='C:\Users\18720\AppData\Roaming\Typora\typora-user-images\image-20240827181550788.png'><img src="C:\Users\18720\AppData\Roaming\Typora\typora-user-images\image-20240827181550788.png" alt="image-20240827181550788"></p>
<p>在<code>home.html</code>下添加所需按钮与对应功能：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myButton&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shifted-image&quot;</span>&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./pic.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;拍照识别&quot;</span>&gt;</span><br>	<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><br>	<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;loadJsonButton&quot;</span>&gt;</span><br>		<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./picture.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;导入代码&quot;</span>&gt;</span><br>	<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><br>	<span class="hljs-comment">&lt;!-- 在&lt;body&gt;标签中的合适位置添加以下按钮 --&gt;</span><br><br>	<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./QSCode/QScript.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><br>	<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p>其中配置按钮的图像与样式的类型如下：其中，点开头的样式用于对按钮位置进行修饰。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--pic button style---&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">	<span class="hljs-selector-tag">button</span> &#123;</span><br><span class="language-css">		<span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">		<span class="hljs-attribute">outline</span>: none;</span><br><span class="language-css">		<span class="hljs-attribute">background</span>: none;</span><br><span class="language-css">		<span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">		<span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">	&#125;</span><br><span class="language-css"></span><br><span class="language-css">	<span class="hljs-selector-tag">button</span> <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">		<span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">	&#125;</span><br><span class="language-css"></span><br><span class="language-css">	<span class="hljs-selector-class">.shifted-image</span> &#123;</span><br><span class="language-css">		<span class="hljs-attribute">margin-left</span>: <span class="hljs-number">59%</span>;</span><br><span class="language-css">		<span class="hljs-comment">/* 将图片下移其高度的一半 */</span></span><br><span class="language-css">	&#125;</span><br><span class="language-css"></span><br><span class="language-css">	<span class="hljs-selector-class">.scaled-image</span> &#123;</span><br><span class="language-css">		<span class="hljs-attribute">width</span>: <span class="hljs-number">70%</span>;</span><br><span class="language-css">		<span class="hljs-attribute">height</span>: auto;</span><br><span class="language-css">	&#125;</span><br><span class="language-css"></span><br><span class="language-css">	<span class="hljs-selector-class">.both-images</span> &#123;</span><br><span class="language-css">		<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30%</span>;</span><br><span class="language-css">		<span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;</span><br><span class="language-css">		<span class="hljs-attribute">height</span>: auto;</span><br><span class="language-css">	&#125;</span><br><span class="language-css"></span><br><span class="language-css">	<span class="hljs-selector-class">.button-container</span> &#123;</span><br><span class="language-css">		<span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">	&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-comment">&lt;!--pic button style---&gt;</span><br></code></pre></td></tr></table></figure>



<p>其中按钮对应的JavaScript代码将实现拍摄功能对python的调用与前端用户反馈，具体内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 点击按钮后执行 </span><br><span class="hljs-keyword">const</span> &#123; exec &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;child_process&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 通过ID获取按钮元素</span><br>    <span class="hljs-keyword">var</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myButton&#x27;</span>);<br><br>    <span class="hljs-comment">// 为按钮添加点击事件监听器</span><br>    button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br><br><br>        <span class="hljs-comment">// 调用python脚本</span><br>        <span class="hljs-keyword">const</span> &#123; spawn &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;child_process&#x27;</span>);<br><br>        <span class="hljs-comment">// 使用spawn启动Python脚本</span><br>        <span class="hljs-comment">// const pythonProcess = spawn(&#x27;python&#x27;, [&#x27;./src/app/QSCode/a().py&#x27;]);</span><br>        <span class="hljs-keyword">const</span> pypath = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;./QSCode/pic2json/dist/pic2code.exe&#x27;</span>)<br>        <span class="hljs-keyword">const</span> pythonProcess = <span class="hljs-title function_">spawn</span>(pypath);<br><br>        <span class="hljs-comment">// 监听Python脚本的输出</span><br>        pythonProcess.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Python script output: <span class="hljs-subst">$&#123;data&#125;</span>`</span>);<br>        &#125;);<br><br>        <span class="hljs-comment">// 监听Python脚本的错误输出</span><br>        pythonProcess.<span class="hljs-property">stderr</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Python script error: <span class="hljs-subst">$&#123;data&#125;</span>`</span>);<br>        &#125;);<br><br>        <span class="hljs-comment">// 监听Python脚本结束事件</span><br>        pythonProcess.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;close&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Python script closed with code <span class="hljs-subst">$&#123;code&#125;</span>`</span>);<br>            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;图片已拍摄，请确保启动OCR服务后点击&quot;2&quot;按钮&#x27;</span>); <span class="hljs-comment">// 显示一个警告框</span><br>        &#125;);<br>    &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>



<h3 id="数据处理与导入"><a href="#数据处理与导入" class="headerlink" title="数据处理与导入"></a>数据处理与导入</h3><p>以上JavaScript脚本将调用由python编写的图像处理脚本，代码如下：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 启动程序时，先调用capture_image()函数，将图像保存到pic文件夹中，然后调用convert_image_to_base64()函数，将图像转换为base64编码，并将编码发送给后端。后端收到编码后，调用OCR接口，将图像中的文字识别出来，并将识别结果返回给前端。前端将识别结果显示在画布上。</span><br><br><span class="hljs-comment">#OCR程序应及时启动</span><br><br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> base64<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> sqlite3  <br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-comment"># Existing code</span><br><br>result = &#123;<br>    <span class="hljs-string">&quot;pages&quot;</span>: [<br>        <span class="hljs-string">&quot;page 1&quot;</span><br>    ],<br>    <span class="hljs-string">&quot;currentPage&quot;</span>: <span class="hljs-string">&quot;page 1&quot;</span>,<br>    <span class="hljs-string">&quot;page 1&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;textstartat&quot;</span>: <span class="hljs-number">36</span>,<br>        <span class="hljs-string">&quot;sprites&quot;</span>: [<br>            <span class="hljs-string">&quot;Tic 1&quot;</span><br>        ],<br>        <span class="hljs-string">&quot;num&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;lastSprite&quot;</span>: <span class="hljs-string">&quot;Tic 1&quot;</span>,<br>        <span class="hljs-string">&quot;Tic 1&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;shown&quot;</span>: <span class="hljs-literal">True</span>,<br>            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;sprite&quot;</span>,<br>            <span class="hljs-string">&quot;md5&quot;</span>: <span class="hljs-string">&quot;Blue.svg&quot;</span>,<br>            <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Tic 1&quot;</span>,<br>            <span class="hljs-string">&quot;flip&quot;</span>: <span class="hljs-literal">True</span>,<br>            <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Tic&quot;</span>,<br>            <span class="hljs-string">&quot;angle&quot;</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">&quot;scale&quot;</span>: <span class="hljs-number">0.5</span>,<br>            <span class="hljs-string">&quot;speed&quot;</span>: <span class="hljs-number">2</span>,<br>            <span class="hljs-string">&quot;defaultScale&quot;</span>: <span class="hljs-number">0.5</span>,<br>            <span class="hljs-string">&quot;sounds&quot;</span>: [<br>                <span class="hljs-string">&quot;pop.mp3&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;xcoor&quot;</span>: <span class="hljs-number">123</span>,<br>            <span class="hljs-string">&quot;ycoor&quot;</span>: <span class="hljs-number">180</span>,<br>            <span class="hljs-string">&quot;cx&quot;</span>: <span class="hljs-number">73</span>,<br>            <span class="hljs-string">&quot;cy&quot;</span>: <span class="hljs-number">123</span>,<br>            <span class="hljs-string">&quot;w&quot;</span>: <span class="hljs-number">147</span>,<br>            <span class="hljs-string">&quot;h&quot;</span>: <span class="hljs-number">247</span>,<br>            <span class="hljs-string">&quot;homex&quot;</span>: <span class="hljs-number">123</span>,<br>            <span class="hljs-string">&quot;homey&quot;</span>: <span class="hljs-number">180</span>,<br>            <span class="hljs-string">&quot;homescale&quot;</span>: <span class="hljs-number">0.5</span>,<br>            <span class="hljs-string">&quot;homeshown&quot;</span>: <span class="hljs-literal">True</span>,<br>            <span class="hljs-string">&quot;homeflip&quot;</span>: <span class="hljs-literal">True</span>,<br>            <span class="hljs-string">&quot;scripts&quot;</span>: [<br>                []<br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;layers&quot;</span>: [<br>            <span class="hljs-string">&quot;Tic 1&quot;</span><br>        ]<br>    &#125;<br>&#125;<br><br>BDict = &#123;<br>    <span class="hljs-string">&quot;A1&quot;</span>: [<span class="hljs-string">&quot;onflag&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;A2&quot;</span>: [<span class="hljs-string">&quot;onclick&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;A3&quot;</span>: [<span class="hljs-string">&quot;ontouch&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;A4&quot;</span>: [<span class="hljs-string">&quot;onmessage&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;A5&quot;</span>: [<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;Orange&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br><br>    <span class="hljs-string">&quot;B1&quot;</span>: [<span class="hljs-string">&quot;home&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;B2&quot;</span>: [<span class="hljs-string">&quot;hop&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;B3&quot;</span>: [<span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;B4&quot;</span>: [<span class="hljs-string">&quot;right&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;B5&quot;</span>: [<span class="hljs-string">&quot;down&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;B6&quot;</span>: [<span class="hljs-string">&quot;up&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;B7&quot;</span>: [<span class="hljs-string">&quot;forward&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;B8&quot;</span>: [<span class="hljs-string">&quot;back&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br><br>    <span class="hljs-string">&quot;C1&quot;</span>: [<span class="hljs-string">&quot;say&quot;</span>, <span class="hljs-string">&quot;hi&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;C2&quot;</span>: [<span class="hljs-string">&quot;grow&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;C3&quot;</span>: [<span class="hljs-string">&quot;shrink&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;C4&quot;</span>: [<span class="hljs-string">&quot;same&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;C5&quot;</span>: [<span class="hljs-string">&quot;hide&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;C6&quot;</span>: [<span class="hljs-string">&quot;show&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br><br>    <span class="hljs-string">&quot;D1&quot;</span>: [<span class="hljs-string">&quot;endstack&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;D2&quot;</span>: [<span class="hljs-string">&quot;forever&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br><br>    <span class="hljs-string">&quot;E1&quot;</span>: [<span class="hljs-string">&quot;playsnd&quot;</span>, <span class="hljs-string">&quot;pop.mp3&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br><br>    <span class="hljs-string">&quot;F1&quot;</span>: [<span class="hljs-string">&quot;wait&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;F2&quot;</span>: [<span class="hljs-string">&quot;stopmine&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;F3&quot;</span>: [<span class="hljs-string">&quot;setspeed&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>],<br>    <span class="hljs-string">&quot;F4&quot;</span>: [<span class="hljs-string">&quot;repeat&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,[]],<br>&#125;<br><br>executable_path = os.path.dirname(sys.executable)<br>pic_folder_path = os.path.join(executable_path, <span class="hljs-string">&#x27;pic&#x27;</span>)<br>imagepath = pic_folder_path + <span class="hljs-string">&#x27;\\&#x27;</span> + <span class="hljs-string">&#x27;capture.jpg&#x27;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">capture_image</span>():<br>    <span class="hljs-comment"># Create the pic folder if it doesn&#x27;t exist</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(<span class="hljs-string">&#x27;pic&#x27;</span>):<br>        os.makedirs(<span class="hljs-string">&#x27;pic&#x27;</span>)<br><br>    <span class="hljs-comment"># Capture image from camera</span><br>    cap = cv2.VideoCapture(<span class="hljs-number">0</span>)<br>    ret, frame = cap.read()<br><br>    <span class="hljs-comment"># Save the captured image</span><br>    <span class="hljs-keyword">if</span> ret:<br>        cv2.imwrite(imagepath, frame)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Image captured and saved successfully.&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Failed to capture image.&quot;</span>)<br><br>    <span class="hljs-comment"># Release the camera</span><br>    cap.release()<br><br><span class="hljs-comment"># Convert image to base64</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_image_to_base64</span>(<span class="hljs-params">image_path</span>):<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(image_path, <span class="hljs-string">&quot;rb&quot;</span>) <span class="hljs-keyword">as</span> image_file:<br>        encoded_image = base64.b64encode(image_file.read()).decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Image converted to base64 successfully.&quot;</span>)<br>    <span class="hljs-keyword">return</span> encoded_image<br><br><br><span class="hljs-comment"># 调用OCR接口</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ocr</span>(<span class="hljs-params">encoded_image</span>):<br>    <span class="hljs-comment"># 启动umi.exe</span><br>    url = <span class="hljs-string">&quot;http://127.0.0.1:1224/api/ocr&quot;</span><br>    data = &#123;<br>        <span class="hljs-string">&quot;base64&quot;</span>: encoded_image,<br>        <span class="hljs-string">&quot;options&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;data.format&quot;</span>: <span class="hljs-string">&quot;text&quot;</span><br>        &#125;<br>    &#125;<br><br>    headers = &#123;<span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>&#125;<br>    data_str = json.dumps(data)<br>    response = requests.post(url, data=data_str, headers=headers)<br>    <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:<br>        res_dict = json.loads(response.text)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ocr result:\n&quot;</span>, res_dict.get(<span class="hljs-string">&quot;data&quot;</span>))<br>        matches = re.findall(<span class="hljs-string">r&#x27;([A-Z]\d|\d|\*)&#x27;</span>, res_dict.get(<span class="hljs-string">&quot;data&quot;</span>))<br>        formatted_result = <span class="hljs-string">&#x27; &#x27;</span>.join(matches)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;formatted result:\n&quot;</span>, formatted_result)<br>        <span class="hljs-keyword">return</span> formatted_result<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Failed to call OCR API.&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br><br><span class="hljs-comment"># 支持循环结构, F4 后接循环次数， 后为循环内的指令，*表示循环结束</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">word2Json</span>(<span class="hljs-params">userInput</span>):<br>    inputList = userInput.split()<br>    loop_start = <span class="hljs-literal">False</span><br>    loop_count = <span class="hljs-number">0</span><br>    loop_instructions = []<br>    loop_x = <span class="hljs-number">10</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(inputList)):<br>        <span class="hljs-keyword">if</span> i+<span class="hljs-number">1</span> == <span class="hljs-built_in">len</span>(inputList):<br>            <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> loop_start:<br>            <span class="hljs-keyword">if</span> inputList[i] == <span class="hljs-string">&quot;*&quot;</span>:<br>                loop_start = <span class="hljs-literal">False</span><br>                result[<span class="hljs-string">&quot;page 1&quot;</span>][<span class="hljs-string">&quot;Tic 1&quot;</span>][<span class="hljs-string">&quot;scripts&quot;</span>][<span class="hljs-number">0</span>].append([<span class="hljs-string">&quot;repeat&quot;</span>, loop_count, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, loop_instructions])<br>                loop_instructions = []<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">if</span> inputList[i] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> BDict:<br>                    <span class="hljs-keyword">continue</span><br>                loop_instructions.append(BDict[inputList[i]])<br>        <span class="hljs-keyword">elif</span> inputList[i] == <span class="hljs-string">&quot;F4&quot;</span>:<br>            loop_start = <span class="hljs-literal">True</span><br>            loop_count = <span class="hljs-built_in">int</span>(inputList[i+<span class="hljs-number">1</span>])<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">if</span> inputList[i] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> BDict:<br>                <span class="hljs-keyword">continue</span><br>            key = inputList[i]<br>            value = inputList[i+<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">if</span> value.isdigit():<br>                value = <span class="hljs-built_in">int</span>(value)<br>                <span class="hljs-keyword">if</span> value == <span class="hljs-number">0</span>:<br>                    <span class="hljs-comment"># 将0设置为&quot;NULL&quot;</span><br><br>                    BDict[key][<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;null&quot;</span><br><br>            <span class="hljs-comment"># 将BDict[key][1]的值设置为上一个BDict[key][1]的值加10</span><br>            BDict[key][<span class="hljs-number">2</span>] = loop_x + <span class="hljs-number">40</span><br>            <span class="hljs-comment"># 更新上一个BDict[key][1]的值</span><br>            loop_x = BDict[key][<span class="hljs-number">2</span>]<br>            result[<span class="hljs-string">&quot;page 1&quot;</span>][<span class="hljs-string">&quot;Tic 1&quot;</span>][<span class="hljs-string">&quot;scripts&quot;</span>][<span class="hljs-number">0</span>].append(BDict[key])       <br><br>    <br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./a.json&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>        json.dump(result, file, indent=<span class="hljs-number">4</span>)<br>    <span class="hljs-keyword">return</span> result<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">mainP2J</span>():<br>    <span class="hljs-comment"># 拍照并保存图片</span><br>    capture_image()<br>    <span class="hljs-comment"># 图片转base64</span><br>    encoded_image = convert_image_to_base64(imagepath)<br>    <span class="hljs-comment"># print(encoded_image)</span><br><br>    <span class="hljs-comment"># 调用OCR接口</span><br>    userinput = ocr(encoded_image)<br><br>    <span class="hljs-comment"># userinput = &quot;B3 6 F4 2 B7 2 D1 null B8 3 * B8 3&quot;</span><br>    word2Json(userinput)<br>    linkSQL(result)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">debugMain</span>():<br>    <span class="hljs-comment"># 拍照并保存图片</span><br>    capture_image()<br>    <span class="hljs-comment"># 图片转base64</span><br>    encoded_image = convert_image_to_base64(imagepath)<br>    <span class="hljs-comment"># print(encoded_image)</span><br><br>    <span class="hljs-comment"># 调用OCR接口</span><br>    userinput = ocr(encoded_image)<br><br>    <span class="hljs-comment">#userinput = &quot;B3 6 F4 2 B7 2 D1 null B8 3 * B8 3&quot;</span><br>    word2Json(userinput)<br>    <span class="hljs-comment">#linkSQL(result)</span><br><br>debugMain()<br></code></pre></td></tr></table></figure>

<p>使用<code>pyinstaller</code>进行python程序编译，可使其在普通Windows平台正常运行。</p>
<p>另一按钮用于将数据写入jsr，当按钮按下，electron页面将通知渲染进程<code>electronClient.js</code>，借由渲染进程向主进程发送加载数据的信息：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 当home.html页面的按钮loadJsonButton被点击时，会向主进程发送消息，消息类型为&#x27;load-json-file&#x27;，消息内容为&#x27;a.json&#x27;。</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> loadJsonButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;loadJsonButton&#x27;</span>);<br>    loadJsonButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-comment">// 使用Node.js的fs模块读取本地文件</span><br>        ipcRenderer.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;load-json-file&#x27;</span>, <span class="hljs-string">&#x27;a.json&#x27;</span>);<br>    &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>将数据导入sjr需要调取程序提供的SQLite数据库管理实例，于<code>main.js</code>中创建一个新方法用于写入数据，通过阅读项目主进程可发现以下数据库管理方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment">  runs a sql query on the database, returns the number of rows from the result</span><br><span class="hljs-comment">  <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">json</span>&#125; json object with stmt and values filled out</span><br><span class="hljs-comment">  <span class="hljs-doctag">@returns</span> <span class="hljs-variable">lastRowId</span></span><br><span class="hljs-comment">  */</span><br>  <span class="hljs-title function_">stmt</span>(<span class="hljs-params">jsonStrOrJsonObj</span>) &#123;<br><br><br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-comment">// &#123;&quot;stmt&quot;:&quot;select name,thumbnail,id,isgift from projects where deleted = ? AND version = ? AND gallery IS NULL order by ctime desc&quot;,&quot;values&quot;:[&quot;NO&quot;,&quot;iOSv01&quot;]&#125;</span><br><br>      <span class="hljs-comment">// if it&#x27;s a string, parse it.  if not, use it if it&#x27;s not null.</span><br>      <span class="hljs-keyword">const</span> json = (<span class="hljs-keyword">typeof</span> jsonStrOrJsonObj === <span class="hljs-string">&#x27;string&#x27;</span>) ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonStrOrJsonObj) : jsonStrOrJsonObj || &#123;&#125;;<br>      <span class="hljs-keyword">const</span> stmt = json.<span class="hljs-property">stmt</span>;<br>      <span class="hljs-keyword">const</span> values = json.<span class="hljs-property">values</span>;<br><br><br><br>      <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG_DATABASE</span>) <span class="hljs-title function_">debugLog</span>(<span class="hljs-string">&#x27;DatabaseManager executing stmt&#x27;</span>, stmt, values);<br><br>      <span class="hljs-keyword">const</span> statement = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">prepare</span>(stmt, values);<br><br>      <span class="hljs-keyword">while</span> (statement.<span class="hljs-title function_">step</span>()) statement.<span class="hljs-title function_">get</span>();<br>      <span class="hljs-comment">// return JSON.stringify(statement.getAsObject());</span><br><br>      <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;select last_insert_rowid();&#x27;</span>);<br><br>      <span class="hljs-keyword">const</span> lastRowId = result[<span class="hljs-number">0</span>].<span class="hljs-property">values</span>[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br><br>      <span class="hljs-keyword">return</span> lastRowId;<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG_DATABASE</span>) <span class="hljs-title function_">debugLog</span>(<span class="hljs-string">&#x27;stmt failed&#x27;</span>, jsonStrOrJsonObj, e);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;stmt failed&#x27;</span>, jsonStrOrJsonObj, e);<br>      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure>

<p>透过该方法构建数据库插入语句，并订阅渲染进程传入的导入数据的信息，当接收器收到信号时调用以下方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs javascript">ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;load-json-file&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event, filename</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;load-json-file&#x27;</span>);<br>  <span class="hljs-keyword">const</span> db = dataStore.<span class="hljs-title function_">getDatabaseManager</span>();<br><br>  <span class="hljs-comment">// 读取JSON文件</span><br>  <span class="hljs-keyword">const</span> filePath = <span class="hljs-string">&#x27;./a.json&#x27;</span>;<br>  <span class="hljs-keyword">if</span> (!filePath) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;load-json-file: File could not be resolved.&#x27;</span>, filename);<br>    event.<span class="hljs-property">returnValue</span> = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  <span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(filePath, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br>  <span class="hljs-keyword">const</span> newJsonData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);<br><br>  <span class="hljs-keyword">const</span> currentTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>();<br>  <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();<br><br>  <span class="hljs-comment">// 完整测试数据</span><br>  <span class="hljs-keyword">const</span> newProject = &#123;<br>    <span class="hljs-comment">// ID: newID,</span><br>    <span class="hljs-attr">CTIME</span>: currentTime,<br>    <span class="hljs-attr">MTIME</span>: timestamp,<br>    <span class="hljs-title class_">ALTMD5</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 假设没有其他元数据的MD5，使用NULL</span><br>    <span class="hljs-attr">POS</span>: <span class="hljs-literal">null</span>,     <span class="hljs-comment">// 假设没有特定位置信息，使用NULL</span><br>    <span class="hljs-attr">NAME</span>: <span class="hljs-string">`P<span class="hljs-subst">$&#123;currentTime.slice(<span class="hljs-number">2</span>, <span class="hljs-number">15</span>)&#125;</span>`</span>, <span class="hljs-comment">// 项目名称，这里使用ID前缀&#x27;P&#x27;作为示例</span><br>    <span class="hljs-title class_">JSON</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(newJsonData), <span class="hljs-comment">// 将JavaScript对象转换为JSON字符串</span><br>    <span class="hljs-attr">THUMBNAIL</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123; <span class="hljs-string">&quot;pagecount&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&quot;md5&quot;</span>: <span class="hljs-string">&quot;13_823d327a5d13e21aea5d06732a3c329d.png&quot;</span> &#125;), <span class="hljs-comment">// 假设的缩略图信息</span><br>    <span class="hljs-attr">OWNER</span>: <span class="hljs-literal">null</span>,   <span class="hljs-comment">// 假设没有特定所有者信息，使用NULL</span><br>    <span class="hljs-attr">GALLERY</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 假设项目不特定于画廊，使用NULL</span><br>    <span class="hljs-attr">DELETED</span>: <span class="hljs-string">&#x27;NO&#x27;</span>, <span class="hljs-comment">// 假设项目未被删除</span><br>    <span class="hljs-attr">VERSION</span>: <span class="hljs-string">&#x27;iOSv01&#x27;</span>, <span class="hljs-comment">// 假设的项目版本</span><br>    <span class="hljs-attr">ISGIFT</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 假设项目不是礼物</span><br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> newCMD = &#123;<br>    <span class="hljs-attr">stmt</span>: <span class="hljs-string">&quot;insert into projects (ctime, mtime, altmd5, pos, name,json, thumbnail, owner, gallery, deleted, version, isgift) values (?,?,?,?,?,?,?,?,?,?,?,?)&quot;</span>,<br>    <span class="hljs-attr">values</span>: [newProject.<span class="hljs-property">CTIME</span>, newProject.<span class="hljs-property">MTIME</span>, newProject.<span class="hljs-property">ALTMD5</span>, newProject.<span class="hljs-property">POS</span>, newProject.<span class="hljs-property">NAME</span>, newProject.<span class="hljs-property">JSON</span>, newProject.<span class="hljs-property">THUMBNAIL</span>, newProject.<span class="hljs-property">OWNER</span>, newProject.<span class="hljs-property">GALLERY</span>, newProject.<span class="hljs-property">DELETED</span>, newProject.<span class="hljs-property">VERSION</span>, newProject.<span class="hljs-property">ISGIFT</span>]<br>  &#125;;<br>  event.<span class="hljs-property">returnValue</span> = db.<span class="hljs-title function_">stmt</span>(newCMD);<br>  <span class="hljs-keyword">if</span> (win) &#123;<br>    win.<span class="hljs-title function_">reload</span>();<br>  &#125;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;load-json-file result:&#x27;</span>, event.<span class="hljs-property">returnValue</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>完成数据写入后将自动刷新页面实现新工程的可视化，并通过测试数据完成测试：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 测试JSON数据</span><br><span class="hljs-keyword">const</span> newJsonData = &#123; <span class="hljs-string">&quot;pages&quot;</span>: [<span class="hljs-string">&quot;page 1&quot;</span>], <span class="hljs-string">&quot;currentPage&quot;</span>: <span class="hljs-string">&quot;page 1&quot;</span>, <span class="hljs-string">&quot;page 1&quot;</span>: &#123; <span class="hljs-string">&quot;textstartat&quot;</span>: <span class="hljs-number">36</span>, <span class="hljs-string">&quot;sprites&quot;</span>: [<span class="hljs-string">&quot;Tic 1&quot;</span>], <span class="hljs-string">&quot;num&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&quot;lastSprite&quot;</span>: <span class="hljs-string">&quot;Tic 1&quot;</span>, <span class="hljs-string">&quot;Tic 1&quot;</span>: &#123; <span class="hljs-string">&quot;shown&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;sprite&quot;</span>, <span class="hljs-string">&quot;md5&quot;</span>: <span class="hljs-string">&quot;Blue.svg&quot;</span>, <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Tic 1&quot;</span>, <span class="hljs-string">&quot;flip&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Tic&quot;</span>, <span class="hljs-string">&quot;angle&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&quot;scale&quot;</span>: <span class="hljs-number">0.5</span>, <span class="hljs-string">&quot;speed&quot;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&quot;defaultScale&quot;</span>: <span class="hljs-number">0.5</span>, <span class="hljs-string">&quot;sounds&quot;</span>: [<span class="hljs-string">&quot;pop.mp3&quot;</span>], <span class="hljs-string">&quot;xcoor&quot;</span>: <span class="hljs-number">123</span>, <span class="hljs-string">&quot;ycoor&quot;</span>: <span class="hljs-number">180</span>, <span class="hljs-string">&quot;cx&quot;</span>: <span class="hljs-number">75</span>, <span class="hljs-string">&quot;cy&quot;</span>: <span class="hljs-number">126</span>, <span class="hljs-string">&quot;w&quot;</span>: <span class="hljs-number">151</span>, <span class="hljs-string">&quot;h&quot;</span>: <span class="hljs-number">253</span>, <span class="hljs-string">&quot;homex&quot;</span>: <span class="hljs-number">123</span>, <span class="hljs-string">&quot;homey&quot;</span>: <span class="hljs-number">180</span>, <span class="hljs-string">&quot;homescale&quot;</span>: <span class="hljs-number">0.5</span>, <span class="hljs-string">&quot;homeshown&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">&quot;homeflip&quot;</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">&quot;scripts&quot;</span>: [[[<span class="hljs-string">&quot;back&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-number">96</span>, <span class="hljs-number">44</span>], [<span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-number">161</span>, <span class="hljs-number">44</span>], [<span class="hljs-string">&quot;repeat&quot;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">226</span>, <span class="hljs-number">28</span>, [[<span class="hljs-string">&quot;forward&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-number">261</span>, <span class="hljs-number">44</span>], [<span class="hljs-string">&quot;endstack&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>, <span class="hljs-number">326</span>, <span class="hljs-number">44</span>]]]]] &#125;, <span class="hljs-string">&quot;layers&quot;</span>: [<span class="hljs-string">&quot;Tic 1&quot;</span>] &#125; &#125;;<br><br></code></pre></td></tr></table></figure>

<p class='item-img' data-src='C:\Users\18720\AppData\Roaming\Typora\typora-user-images\image-20240827181845780.png'><img src="C:\Users\18720\AppData\Roaming\Typora\typora-user-images\image-20240827181845780.png" alt="image-20240827181845780"></p>
<h3 id="程序打包"><a href="#程序打包" class="headerlink" title="程序打包"></a>程序打包</h3><p>使用electron提供的打包工具或原sjr提供的指令进行程序编译，详细配置参数如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge start&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;debugMain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge start -i&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;package&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge package&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;make&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge make&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;make64&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge make --arch=x64&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;make32&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge make --arch=ia32&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;makeAll&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge make --arch=ia32,x64&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;publish&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electron-forge publish&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;lint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eslint src --color&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure>

<p>可针对不同的用户平台生成对应的可执行文件。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol>
<li><strong>Umi-OCR GitHub Repository</strong><ul>
<li>作者：hiroi-sora</li>
<li>标题：Umi-OCR: OCR software, free and offline</li>
<li>URL：<a target="_blank" rel="noopener" href="https://github.com/hiroi-sora/Umi-OCR">https://github.com/hiroi-sora/Umi-OCR</a></li>
</ul>
</li>
<li><strong>Umi-OCR Documentation</strong><ul>
<li>作者：hiroi-sora</li>
<li>标题：Umi-OCR Documentation</li>
<li>URL：<a target="_blank" rel="noopener" href="https://github.com/hiroi-sora/Umi-OCR/blob/main/docs/http/README.md">https://github.com/hiroi-sora/Umi-OCR/blob/main/docs/http/README.md</a></li>
</ul>
</li>
<li><strong>How to Write a Highly Readable Software Engineering Design Document</strong><ul>
<li>作者：古道轻风</li>
<li>标题：如何写一份高可读性的软件工程设计文档</li>
<li>URL：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/88223100/p/How-to-write-a-highly-readable-software-engineering-design-document.html">https://www.cnblogs.com/88223100/p/How-to-write-a-highly-readable-software-engineering-design-document.html</a></li>
</ul>
</li>
<li><strong>ScratchJr Desktop README</strong><ul>
<li>作者：krayon</li>
<li>标题：ScratchJr Desktop README</li>
<li>URL：<a target="_blank" rel="noopener" href="https://github.com/krayon/scratchjr-desktop/blob/master/README.md">https://github.com/krayon/scratchjr-desktop/blob/master/README.md</a></li>
</ul>
</li>
<li><strong>my-electron-app GitHub Repository</strong><ul>
<li>作者：sui5yue6</li>
<li>标题：my-electron-app Source Code</li>
<li>URL：<a target="_blank" rel="noopener" href="https://github.com/sui5yue6/my-electron-app/blob/main/main.js">https://github.com/sui5yue6/my-electron-app/blob/main/main.js</a></li>
</ul>
</li>
<li><strong>Electron Quick Start Guide</strong><ul>
<li>作者：Electron Team</li>
<li>标题：快速入门 | Electron</li>
<li>URL：<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/tutorial/quick-start">https://www.electronjs.org/zh/docs/latest/tutorial/quick-start</a></li>
</ul>
</li>
</ol>
<div id="paginator"></div></div><div id="post-footer"><div id="pages" style="justify-content: flex-end"><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2024/07/22/About-VScode-C-C/">About VScode C/C++ Prev →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="To Catalog">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Quits Wang</a></h1><div id="description"><p>Me,a student in NAU,run the blog.</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/wqs111"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" href="mailto:wqs820626@gmail.com"><i class="fa fa-envelope" alt="E-Mail"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/107678025"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%92%88%E5%AF%B9%E7%89%B9%E5%AE%9A%E9%9C%80%E6%B1%82%E8%BF%9B%E8%A1%8CscratchJR%E8%BD%AF%E4%BB%B6%E7%9A%84%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91%E8%AF%B4%E6%98%8E"><span class="toc-number">1.</span> <span class="toc-text">针对特定需求进行scratchJR软件的二次开发说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%9B%AE%E7%9A%84"><span class="toc-number">1.1.</span> <span class="toc-text">开发目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.2.</span> <span class="toc-text">需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A6%81"><span class="toc-number">1.3.</span> <span class="toc-text">设计概要</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%8D%E6%91%84-%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB"><span class="toc-number">1.3.1.</span> <span class="toc-text">拍摄+图像识别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.2.</span> <span class="toc-text">处理+导入数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.4.</span> <span class="toc-text">详细设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.4.1.</span> <span class="toc-text">前端页面设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B8%8E%E5%AF%BC%E5%85%A5"><span class="toc-number">1.4.2.</span> <span class="toc-text">数据处理与导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8C%85"><span class="toc-number">1.4.3.</span> <span class="toc-text">程序打包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">1.5.</span> <span class="toc-text">参考文献</span></a></li></ol></li></ol></div></div><footer><nobr><span class="icp-title">copyright</span><a class="icp-content" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a></nobr><br><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/lib/encrypt/hbe.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>