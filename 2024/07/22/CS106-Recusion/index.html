<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>CS106x-Recusion | RadiantFlame</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy"}}</script><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><script>mermaid.initialize({startOnLoad: false});</script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js"></script><script>MathJax.Hub.Config({
 menuSettings: {
   zoom: "None"
 },
 showMathMenu: false,
 jax: ["input/TeX","output/CommonHTML"],
 extensions: ["tex2jax.js"],
 TeX: {
   extensions: ["AMSmath.js","AMSsymbols.js"],
   equationNumbers: {
     autoNumber: "AMS"
   }
 },
 tex2jax: {
   inlineMath: [["\\(", "\\)"]],
   displayMath: [["\\[", "\\]"]]
 }
});</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: Bender;
 src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
 font-family: BenderLight;
 src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
  --theme-encrypt-confirm: 'confirm'
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>CS106x-Recusion</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2024-07-22T06:47:17.000Z" id="date"> 2024-07-22</time></div></span><br><span>Last Update: <div class="control"><time datetime="2024-07-22T07:03:34.762Z" id="updated"> 2024-07-22</time></div></span><br><span>Word Count: <div class="control">3.4k</div></span><br><span>Read Time: <div class="control">13 min</div></span></div></div><hr><div id="post-content"><p>作业，文档不长，但是感觉很复杂，不过感觉非常有意思！人机对战哎！</p>
<span id="more"></span>

<h1 id="Before-Coding"><a href="#Before-Coding" class="headerlink" title="Before Coding"></a>Before Coding</h1><h2 id="gboggle-h"><a href="#gboggle-h" class="headerlink" title="gboggle.h"></a>gboggle.h</h2><p>起手读源码，因为又有图形接口，作业文档反而不是我最先看的，明明lifeGame那会儿一点源码不会读😂</p>
<blockquote>
<p>这段代码是一个C++头文件，名为<code>gboggle.h</code>，它定义了一个名为GBoggle的游戏的相关接口和功能。下面是对代码的逐行解释：</p>
<ol>
<li>文件开头的注释块提供了文件的基本信息，说明了这个头文件包含的是一个Boggle游戏界面的函数集合，这些函数包括绘制游戏板、管理单词列表和更新计分板。 </li>
<li><code>#ifndef</code>和<code>#define</code>预处理指令用来防止头文件被多次包含进同一个源文件中，这是一种常见的防止重复定义的宏定义方法。 </li>
<li><code>#include &lt;string&gt;</code>和<code>#include &quot;gwindow.h&quot;</code>是包含指令，分别引入了C++标准库中的字符串头文件和另一个名为<code>gwindow.h</code>的头文件，后者可能是一个自定义的图形窗口库。 </li>
<li>定义了两个常量<code>kBoggleWindowWidth</code>和<code>kBoggleWindowHeight</code>，分别代表Boggle游戏窗口的宽度和高度。 </li>
<li>定义了一个枚举类型<code>Player</code>，用来区分人类玩家和电脑玩家。 </li>
<li>函数<code>initGBoggle(GWindow&amp; gw)</code>的声明，该函数用来初始化GBoggle包，并设置使用客户端提供的图形窗口。 </li>
<li>函数<code>shutdownGBoggle()</code>的声明，该函数用来关闭图形窗口并释放与GBoggle包相关联的资源。 </li>
<li>函数<code>drawBoard(int numRows, int numCols)</code>的声明，该函数用来绘制具有指定行数和列数的Boggle游戏板的空布局。 </li>
<li>函数<code>labelCube(int row, int col, char letter)</code>的声明，该函数在指定位置的立方体上绘制一个字母。 </li>
<li>函数<code>highlightCube(int row, int col, bool flag)</code>的声明，该函数根据标志<code>flag</code>的值来高亮或取消高亮指定的立方体。 </li>
<li>函数<code>recordWordForPlayer(const std::string&amp; word, Player player)</code>的声明，该函数记录玩家提交的单词，并更新显示和计分板。单词的得分根据单词的长度来计算。</li>
</ol>
<p>整个头文件为GBoggle游戏提供了基本的框架和功能声明，具体的实现细节需要在对应的源文件中查看。这个头文件是游戏开发中的一部分，为游戏的界面显示和逻辑处理提供了接口。</p>
</blockquote>
<p>懒了，抱一丝儿~<br>注意，<code>enum Player &#123; HUMAN, COMPUTER &#125;;</code>枚举人类与计算机玩家类型，如何使用这个枚举？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c">Player current_player = HUMAN;<br>Player p1 = HUMAN;<br>Player p2 = COMPUTER;<br><br><span class="hljs-keyword">if</span> (current_player == HUMAN) &#123;<br>    <span class="hljs-comment">// do something</span><br>&#125;<br></code></pre></td></tr></table></figure>


<h1 id="WalkThrough"><a href="#WalkThrough" class="headerlink" title="WalkThrough"></a>WalkThrough</h1><h2 id="boggle-cpp"><a href="#boggle-cpp" class="headerlink" title="boggle.cpp"></a>boggle.cpp</h2><p>main中已经完成了GUI的初始化，只需完成<code>playBoggle();</code>部分。</p>
<h3 id="coding"><a href="#coding" class="headerlink" title="coding"></a>coding</h3><h4 id="choose-Letter-Randomly"><a href="#choose-Letter-Randomly" class="headerlink" title="choose Letter Randomly"></a>choose Letter Randomly</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// 摇晃骰子并展示投掷结果</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">chooseLetterRandomly</span><span class="hljs-params">()</span> </span>&#123;<br>    Vector&lt;string&gt; cube = cubeType;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; cube.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        <span class="hljs-comment">// 洗牌</span><br>        <span class="hljs-type">int</span> r = <span class="hljs-built_in">randomInteger</span>(i, cube.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>);<br>        string temp = cube[i];<br>        cube[i] = cube[r];<br>        cube[r] = temp;<br>    &#125;<br><br>    <span class="hljs-type">int</span> d = <span class="hljs-number">4</span>; <span class="hljs-comment">// dimension</span><br>    <span class="hljs-keyword">if</span> (cube.<span class="hljs-built_in">size</span>() % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>)&#123;<br>        d = <span class="hljs-number">5</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 绘制</span><br>    <span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; cube.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        <span class="hljs-keyword">if</span> (d == <span class="hljs-number">4</span> &amp;&amp; i % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; i != <span class="hljs-number">0</span>) &#123;<br>            count = <span class="hljs-number">0</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d == <span class="hljs-number">5</span> &amp;&amp; i % <span class="hljs-number">5</span> == <span class="hljs-number">0</span> &amp;&amp; i != <span class="hljs-number">0</span>) &#123;<br>            count = <span class="hljs-number">0</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            count++;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; d; j++) &#123;<br>            <span class="hljs-type">int</span> rr = <span class="hljs-built_in">randomInteger</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);<br>            string letter = cube[count][rr];<br>            <span class="hljs-built_in">labelCube</span>(count, j, letter);<br><br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 找单词并高亮</span><br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">playerFindWord</span><span class="hljs-params">(Player current_player)</span> </span>&#123;<br>    <span class="hljs-comment">// do something no matter who is current player</span><br><br>    <span class="hljs-keyword">if</span> (current_player == HUMAN) &#123;<br><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// computer</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Function: playBoggle</span><br><span class="hljs-comment"> * --------------------</span><br><span class="hljs-comment"> * Manages all details needed for the user to play one</span><br><span class="hljs-comment"> * or more games of Boggle.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-built_in">playBoggle</span>() &#123;<br>    <span class="hljs-type">int</span> dimension = <span class="hljs-built_in">getPreferredBoardSize</span>();<br>    <span class="hljs-built_in">drawBoard</span>(dimension, dimension);<br>    cout &lt;&lt; <span class="hljs-string">&quot;This is where you&#x27;d play the game of Boggle&quot;</span> &lt;&lt; endl;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * seem should start at here</span><br><span class="hljs-comment">     * -------------------------</span><br><span class="hljs-comment">     * 画版</span><br><span class="hljs-comment">     * 打乱所有的字符串骰子 Shuffle</span><br><span class="hljs-comment">     * 递归的找出所有单词containWord（优化大小写</span><br><span class="hljs-comment">     * 人类回合：输入并计分，空输入表示结束，单词高亮处理</span><br><span class="hljs-comment">     * 计算机回合：输出所有未被人类发现的单词</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">if</span> (dimension == <span class="hljs-number">4</span>) &#123;<br>        <span class="hljs-built_in">chooseLetterRandomly</span>(kStandardCubes);<span class="hljs-comment">// kStand全局变量不用传参</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">chooseLetterRandomly</span>(kBigBoggleCubes);<br>    &#125;<br><br>    Set&lt;string&gt; wordSet = <span class="hljs-built_in">containWords</span>();<br>    Set&lt;string&gt; visited;<br><br>    Player current_player = HUMAN;<br>    <span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">while</span> (flag) &#123;<br>        string input = <span class="hljs-built_in">getLine</span>(<span class="hljs-string">&quot;input any possible words, enter [space] to end: &quot;</span>); <span class="hljs-comment">// 全改成大写</span><br>        <span class="hljs-keyword">if</span> (input == <span class="hljs-string">&quot; &quot;</span>) &#123;<br>            current_player = COMPUTER; <span class="hljs-comment">// HUMAN to COMPUTER</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (wordSet.<span class="hljs-built_in">contains</span>(input) &amp;&amp; !visited.<span class="hljs-built_in">contains</span>(input))&#123;<br>            <span class="hljs-comment">// 计分，高亮，单词记为以找出</span><br>            <span class="hljs-comment">// 计算机找出所有未被人类找出的单词</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;WRONG WORDS! TRY AGAIN:&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// computer 完成后返回false</span><br>        <span class="hljs-keyword">if</span> (current_player == COMPUTER)<br>            flag =  <span class="hljs-literal">false</span>;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>完成递归的课程之后重新写就轻松不少了，顺手达成成就：连续写一百行代码没有bug。</p>
<p>递归部分完成，就是有点小瑕疵，和lifegame那会儿访问越界类似，很好解决，然后顺序完成了搜索单词的工作，应该把？至少搜出来了</p>
<p>仔细检查了一下搜出来的结果，发现搜出了奇怪的单词，面板上并没有，😓，怎么回事捏？</p>
<p>Debug<br>第一次进入递归时传入了word &#x3D; “”导致没有访问当前的第一个字母，小问题。<br>访问过的字母需要设置为visited，如果单词没有成立再撤回<br>大问题是会搜出不存在的单词，继续De</p>
<p>找到了，传参时将word 赋值为 word + board[i][j + 1] 之类的，并且传入了i，j<br>作为索引，然鹅i，j没有同步整张，导致每次word都连接了相同的字母；另外，三个方向的递归函数全放在了一起，导致纵向的执行了一次后又去执行向右侧访问的操作，导致非法词汇出现。</p>
<p>解决方案比较简单，在进入递归前确认方向即可，用<code>int flag = 0</code>确认，每次改变方向时+1，用flag的值选择方向。</p>
<p>不需要设置visited集合，因为你不知道用户会选择哪种单词组合。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">findWordsHelper</span><span class="hljs-params">(Set&lt;string&gt; &amp;allWords, Grid&lt;<span class="hljs-type">char</span>&gt; &amp;board, string word, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, <span class="hljs-type">int</span> dimension, <span class="hljs-type">int</span> flag, Lexicon &amp;DIC)</span> </span>&#123;<br><br>    <span class="hljs-comment">// base case: 单词正确/访问出界</span><br>    <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> &gt;= dimension || j + <span class="hljs-number">1</span> &gt;= dimension) &#123;<br>        flag++; <span class="hljs-comment">// 改变下轮递归方向</span><br>        <span class="hljs-keyword">return</span>;<br><br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!DIC.<span class="hljs-built_in">containsPrefix</span>(word)) &#123;<br>        <span class="hljs-comment">// 剪枝 Lexion containPrefix()</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// rec case</span><br>        <span class="hljs-keyword">if</span> (DIC.<span class="hljs-built_in">contains</span>(word)) &#123;<br>            allWords.<span class="hljs-built_in">add</span>(word);<br>        &#125;<br><br>        <span class="hljs-comment">// exploer</span><br>        <span class="hljs-comment">// [i][j] visited NO NEED</span><br>        <span class="hljs-comment">// board[i][j]</span><br><br>        <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// 向右侧递归</span><br>            <span class="hljs-built_in">findWordsHelper</span>(allWords, board, word + board[i][j + <span class="hljs-number">1</span>], i, j + <span class="hljs-number">1</span>, dimension, flag, DIC); <span class="hljs-comment">// i, j 作为单词的下一字母索引同步增加</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 向下</span><br>            <span class="hljs-built_in">findWordsHelper</span>(allWords, board, word + board[i + <span class="hljs-number">1</span>][j], i + <span class="hljs-number">1</span>, j, dimension, flag, DIC);<br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// 斜向右下</span><br>            <span class="hljs-built_in">findWordsHelper</span>(allWords, board, word + board[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>], i + <span class="hljs-number">1</span>, j + <span class="hljs-number">1</span>, dimension, flag, DIC);<br>        &#125;<br><br><br>        <span class="hljs-comment">// unchoose NO NEED</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">findWords</span><span class="hljs-params">(Set&lt;string&gt; &amp;allWords, Grid&lt;<span class="hljs-type">char</span>&gt; &amp;board, string word, <span class="hljs-type">int</span> dimension,Lexicon &amp;DIC)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; dimension; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; dimension; j++) &#123;<br>            word = board[i][j];<br>            <span class="hljs-type">int</span> flag = <span class="hljs-number">0</span>;<br>            <span class="hljs-built_in">findWordsHelper</span>(allWords, board, word, i, j, dimension, flag, DIC);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 递归列出单词</span><br><span class="hljs-function">Set&lt;string&gt; <span class="hljs-title">getAllWords</span><span class="hljs-params">(Grid&lt;<span class="hljs-type">char</span>&gt; &amp;board, <span class="hljs-type">int</span> dimension, Lexicon &amp;DIC)</span> </span>&#123;<br>    Set&lt;string&gt; allWords;<br>    string word = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-built_in">findWords</span>(allWords, board, word, dimension, DIC);<br>    <span class="hljs-keyword">return</span> allWords;<br>&#125;<br></code></pre></td></tr></table></figure>


<p>递归部分完成，剩下的不想做了，躺平……<br>没办法嘛，时间太少，后面的内容又很好玩，等不及了😋<br>好像还不太行，看了一下demo，差的太远了，再改改</p>
<p>4月末</p>
<hr>
<h2 id="以下为7月更新部分"><a href="#以下为7月更新部分" class="headerlink" title="以下为7月更新部分"></a>以下为7月更新部分</h2><p>改动一下代码展示风格</p>
<blockquote>
<p>我个人不公开代码的另一个原因，是我认为我的代码实现并不那么优秀，虽然能够通过测试，但还是有很多不足，不敢放到大家面前。私底下我们可以对着题目分享思路，可以对着看看各自的实现方式；放到自己的博客上可以介绍自己对题目的理解，实现的技巧，部分代码的摘要；如果别人有疑问，尝试点出或者和他一起解决…</p>
</blockquote>
<p>中途做web开发和备考耽搁太长时间，决定推倒重做，阅读start code 发现很多以前忽略的地方，尤其是接口部分。</p>
<h3 id="分析功能，给出以下逻辑"><a href="#分析功能，给出以下逻辑" class="headerlink" title="分析功能，给出以下逻辑"></a>分析功能，给出以下逻辑</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// 根据用户选项生成随机词盘，并生成所有可能的词放入词典中 使用新函数</span><br>Grid&lt;<span class="hljs-type">char</span>&gt; board = initBoard(dimension);<br>Set&lt;<span class="hljs-built_in">string</span>&gt; words = initWords(board);<br>Set&lt;<span class="hljs-built_in">string</span>&gt; visited;<br><span class="hljs-comment">// 当玩家为人类时，输入的单词在词典中且为合法新词，则高亮并积分，否则展示对应报错</span><br><span class="hljs-comment">// 当输入为空时切换玩家为计算机</span><br><span class="hljs-comment">// 计算机回合直接展示所有(#`O′)未被找出的单词</span><br>Player currentP = HUMAN;<br><span class="hljs-keyword">while</span> (currentP == HUMAN) &#123;<br>    <span class="hljs-built_in">string</span> wordinput = getLine(<span class="hljs-string">&quot;Enter a word: &quot;</span>);<br>    <span class="hljs-keyword">if</span> (words.contains(wordinput) &amp;&amp; !visited.contains(wordinput)) &#123;<br>        <span class="hljs-comment">// highlight record visited</span><br>        <span class="hljs-keyword">continue</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (words.contains(wordinput) &amp;&amp; visited.contains(wordinput)) &#123;<br>        <span class="hljs-comment">// 重复输入</span><br>        <span class="hljs-keyword">continue</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!words.contains(wordinput) &amp;&amp; <span class="hljs-built_in">strlen</span>(wordinput) &gt; <span class="hljs-number">3</span>) &#123;<br>        <span class="hljs-comment">// 不存在，错词</span><br>        <span class="hljs-keyword">continue</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strlen</span>(wordinput) &lt; <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-built_in">strlen</span>(wordinput) &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// 长度小于4</span><br>        <span class="hljs-keyword">continue</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 空输入？</span><br>        currentP = COMPUTER;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用strlen时注意将string类型转为c语言支持的类型，使用<code>.c_str()</code>方法。<br>另外，如果右括号左有0会导致编译器（Qt）抽风<code>ecpected token ) got 0</code>。</p>
<h3 id="创建board"><a href="#创建board" class="headerlink" title="创建board"></a>创建board</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Function: initBoard</span><br><span class="hljs-comment"> * -------------------</span><br><span class="hljs-comment"> * 初始化board，设置字符并绘制</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-type">static</span> Grid&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">initBoard</span><span class="hljs-params">(<span class="hljs-type">int</span> dimension)</span> &#123;<br>    Grid&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">board</span><span class="hljs-params">(dimension, dimension)</span>;<br>    <span class="hljs-keyword">return</span> board;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这种返回值的方法为什么可行？根据大括号来看，board在这个函数结束的时候就已经被销毁了，如何将其传递到主函数？<br>GIthub copilot：你提到的 board 在函数结束时被销毁的问题是因为 board 是在栈上分配的局部变量。然而，initBoard 函数返回的是一个 Grid<char> 对象的副本，而不是对局部变量的引用。因此，返回的副本在主函数中仍然是有效的。</p>
<p>真的每一步都有坑，给定的骰子是字符串常量，在洗牌前需要将其存入变量中。然后打乱骰子，见上。</p>
<h3 id="递归找出所有单词"><a href="#递归找出所有单词" class="headerlink" title="递归找出所有单词"></a>递归找出所有单词</h3><p>接下来就是最关键的初始化词典部分。需要使用递归。找出所有符合的单词。怎么办呢？我们先从一个字符出发：假设一个4乘4的字符格。每一个字符都应该向右寻找，向下寻找，向左下，右下方寻找。并且完成对应的剪枝操作。另外，当一个词成立的时候，还需要将其设置flag。并按照这个flag，使用递归进行高亮。</p>
<p>关键问题来了。怎么实现单词查找呢？先假设一个4x4的网格。然后我的意思是2x2的网格。然后里面的单词分别是”BOOK”。怎么样才能找到这个词呢？我们的递归函数传入这个矩阵。我们从第一个字母开始，它需要去找所有相邻的字母。我大概有思路了，因为我会用回溯法。不断地向左上角去找。当所有的左上角访问完，再访问上。当倒数第二层的左上角的字母都被遍历完以后，退回一级。再访问退回后的那个点的下一个字。<br>我悟了。单词需要向上不断查找，也需要向右不断查找。不，不对。这样只能查找到与其在同一行、同一列的单词，以及对角线上的单词，不能拐弯。<br>我又悟了。每一次递归函数都会向当前位置周围的八个方向去访问，这有点像广度优先搜索。不过我们这一次的精髓是深度优先搜索。因为每一次搜索都会向八个方向扩展，并且避免已经访问过的位置。那样的话，所有的可能情况都被覆盖了。是吗？假设是个2x2方格，分别是”BOOK”。B向左访问到O。向左上也访问到O。呃，向左上方访问到C。那这样一来，它只能生成”BO”和”BK”两个词。嗯，就这样。</p>
<h4 id="backtracking"><a href="#backtracking" class="headerlink" title="backtracking"></a>backtracking</h4><p>这里插入一些回溯法的练习，不然太懵了，什么都不知道。</p>
<blockquote>
<p>给定两个整数 <code>n</code> 和 <code>k</code>，返回范围 <code>[1, n]</code> 中所有可能的 <code>k</code> 个数的组合。</p>
</blockquote>
<p>果然不懂还得回去看课，花半天时间跟着把递归的题练了一手，补习了不少思路。每次递归都向8个方向递归的思路是对的，比如上层是0，本层递归走向为0，1则下一层就有000，001，010，011.就能覆盖所有的路径。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">initWordsHelper</span><span class="hljs-params">(Lexicon &amp;dic, Set&lt;string&gt; &amp;words, Grid&lt;<span class="hljs-type">char</span>&gt; &amp;board, string formed,</span></span><br><span class="hljs-params"><span class="hljs-function">                            <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, Grid&lt;<span class="hljs-type">int</span>&gt; &amp;visited)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ni = <span class="hljs-number">-1</span>; ni &lt; <span class="hljs-number">2</span>; ni++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> nj = <span class="hljs-number">-1</span>; nj &lt; <span class="hljs-number">2</span>; nj++) &#123;<br>            <span class="hljs-type">int</span> x = i + ni, y = j + nj;<br>            <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span> || x &gt;= board.<span class="hljs-built_in">size</span>() || y &lt; <span class="hljs-number">0</span> || y &gt;= board.<span class="hljs-built_in">size</span>()) &#123;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (dic.<span class="hljs-built_in">contains</span>(formed)) &#123;<br>                words.<span class="hljs-built_in">add</span>(formed);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dic.<span class="hljs-built_in">containsPrefix</span>(formed)) &#123;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (visited[x][y] == <span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            visited[x][y] = <span class="hljs-number">1</span>;<br>            <span class="hljs-built_in">initWordsHelper</span>(dic, words, board, formed + board[x][y], i, j, visited);<br>            visited[x][y] = <span class="hljs-number">0</span>;<br><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>debug一整天，最后发现控制越界时获取数组宽度的函数调成获取元素总数的了… danm！</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>最后总算搞明白回溯法递归的实现了，真的抽象。期间查阅了不少视频和文档：<br><a target="_blank" rel="noopener" href="https://programmercarl.com/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80.html">代码随想录-回溯法</a><br><a target="_blank" rel="noopener" href="https://www.codestepbystep.com/problem/list/cpp">CodeStepByStep–backtracking</a><br>以及做主要的还是CS106x的lecture7~12，花了半天时间回顾了从阶乘到n皇后问题。</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2024/07/22/About-VScode-C-C/">← Next About VScode C/C++</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2024/07/15/Hexo%E4%BD%BF%E7%94%A8%E5%A4%87%E5%BF%98/">Hexo使用备忘 Prev →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="To Catalog">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Quits Wang</a></h1><div id="description"><p>Me,a student in NAU,run the blog.</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/wqs111"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" href="mailto:wqs820626@gmail.com"><i class="fa fa-envelope" alt="E-Mail"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/107678025"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Before-Coding"><span class="toc-number">1.</span> <span class="toc-text">Before Coding</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gboggle-h"><span class="toc-number">1.1.</span> <span class="toc-text">gboggle.h</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WalkThrough"><span class="toc-number">2.</span> <span class="toc-text">WalkThrough</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#boggle-cpp"><span class="toc-number">2.1.</span> <span class="toc-text">boggle.cpp</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#coding"><span class="toc-number">2.1.1.</span> <span class="toc-text">coding</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#choose-Letter-Randomly"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">choose Letter Randomly</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E4%B8%8B%E4%B8%BA7%E6%9C%88%E6%9B%B4%E6%96%B0%E9%83%A8%E5%88%86"><span class="toc-number">2.2.</span> <span class="toc-text">以下为7月更新部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8A%9F%E8%83%BD%EF%BC%8C%E7%BB%99%E5%87%BA%E4%BB%A5%E4%B8%8B%E9%80%BB%E8%BE%91"><span class="toc-number">2.2.1.</span> <span class="toc-text">分析功能，给出以下逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAboard"><span class="toc-number">2.2.2.</span> <span class="toc-text">创建board</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E6%89%BE%E5%87%BA%E6%89%80%E6%9C%89%E5%8D%95%E8%AF%8D"><span class="toc-number">2.2.3.</span> <span class="toc-text">递归找出所有单词</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#backtracking"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">backtracking</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">3.</span> <span class="toc-text">参考</span></a></li></ol></div></div><footer><nobr><span class="icp-title">copyright</span><a class="icp-content" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a></nobr><br><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/lib/encrypt/hbe.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>